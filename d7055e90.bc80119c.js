(window.webpackJsonp=window.webpackJsonp||[]).push([[277],{354:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return u})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return p}));var r=n(3),a=n(7),o=(n(0),n(411)),i=n(415),c=n(416),l={title:"retry",type:"output",status:"stable",categories:["Utility"]},u={unversionedId:"components/outputs/retry",id:"components/outputs/retry",isDocsHomePage:!1,title:"retry",description:"\x3c!--",source:"@site/docs/components/outputs/retry.md",slug:"/components/outputs/retry",permalink:"/docs/components/outputs/retry",editUrl:"https://github.com/Jeffail/benthos/edit/master/website/docs/components/outputs/retry.md",version:"current",sidebar:"docs",previous:{title:"resource",permalink:"/docs/components/outputs/resource"},next:{title:"socket",permalink:"/docs/components/outputs/socket"}},s=[{value:"Fields",id:"fields",children:[{value:"<code>max_retries</code>",id:"max_retries",children:[]},{value:"<code>backoff</code>",id:"backoff",children:[]},{value:"<code>backoff.initial_interval</code>",id:"backoffinitial_interval",children:[]},{value:"<code>backoff.max_interval</code>",id:"backoffmax_interval",children:[]},{value:"<code>backoff.max_elapsed_time</code>",id:"backoffmax_elapsed_time",children:[]},{value:"<code>output</code>",id:"output",children:[]}]}],b={toc:s};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Attempts to write messages to a child output and if the write fails for any\nreason the message is retried either until success or, if the retries or max\nelapsed time fields are non-zero, either is reached."),Object(o.b)(i.a,{defaultValue:"common",values:[{label:"Common",value:"common"},{label:"Advanced",value:"advanced"}],mdxType:"Tabs"},Object(o.b)(c.a,{value:"common",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"# Common config fields, showing default values\noutput:\n  retry:\n    output: {}\n"))),Object(o.b)(c.a,{value:"advanced",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"# All config fields, showing default values\noutput:\n  retry:\n    max_retries: 0\n    backoff:\n      initial_interval: 500ms\n      max_interval: 3s\n      max_elapsed_time: 0s\n    output: {}\n")))),Object(o.b)("p",null,"All messages in Benthos are always retried on an output error, but this would\nusually involve propagating the error back to the source of the message, whereby\nit would be reprocessed before reaching the output layer once again."),Object(o.b)("p",null,"This output type is useful whenever we wish to avoid reprocessing a message on\nthe event of a failed send. We might, for example, have a dedupe processor that\nwe want to avoid reapplying to the same message more than once in the pipeline."),Object(o.b)("p",null,"Rather than retrying the same output you may wish to retry the send using a\ndifferent output target (a dead letter queue). In which case you should instead\nuse the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/components/outputs/try"}),Object(o.b)("inlineCode",{parentName:"a"},"try"))," output type."),Object(o.b)("h2",{id:"fields"},"Fields"),Object(o.b)("h3",{id:"max_retries"},Object(o.b)("inlineCode",{parentName:"h3"},"max_retries")),Object(o.b)("p",null,"The maximum number of retries before giving up on the request. If set to zero there is no discrete limit."),Object(o.b)("p",null,"Type: ",Object(o.b)("inlineCode",{parentName:"p"},"number"),Object(o.b)("br",{parentName:"p"}),"\n","Default: ",Object(o.b)("inlineCode",{parentName:"p"},"0"),"  "),Object(o.b)("h3",{id:"backoff"},Object(o.b)("inlineCode",{parentName:"h3"},"backoff")),Object(o.b)("p",null,"Control time intervals between retry attempts."),Object(o.b)("p",null,"Type: ",Object(o.b)("inlineCode",{parentName:"p"},"object"),"  "),Object(o.b)("h3",{id:"backoffinitial_interval"},Object(o.b)("inlineCode",{parentName:"h3"},"backoff.initial_interval")),Object(o.b)("p",null,"The initial period to wait between retry attempts."),Object(o.b)("p",null,"Type: ",Object(o.b)("inlineCode",{parentName:"p"},"string"),Object(o.b)("br",{parentName:"p"}),"\n","Default: ",Object(o.b)("inlineCode",{parentName:"p"},'"500ms"'),"  "),Object(o.b)("h3",{id:"backoffmax_interval"},Object(o.b)("inlineCode",{parentName:"h3"},"backoff.max_interval")),Object(o.b)("p",null,"The maximum period to wait between retry attempts."),Object(o.b)("p",null,"Type: ",Object(o.b)("inlineCode",{parentName:"p"},"string"),Object(o.b)("br",{parentName:"p"}),"\n","Default: ",Object(o.b)("inlineCode",{parentName:"p"},'"3s"'),"  "),Object(o.b)("h3",{id:"backoffmax_elapsed_time"},Object(o.b)("inlineCode",{parentName:"h3"},"backoff.max_elapsed_time")),Object(o.b)("p",null,"The maximum period to wait before retry attempts are abandoned. If zero then no limit is used."),Object(o.b)("p",null,"Type: ",Object(o.b)("inlineCode",{parentName:"p"},"string"),Object(o.b)("br",{parentName:"p"}),"\n","Default: ",Object(o.b)("inlineCode",{parentName:"p"},'"0s"'),"  "),Object(o.b)("h3",{id:"output"},Object(o.b)("inlineCode",{parentName:"h3"},"output")),Object(o.b)("p",null,"A child output."),Object(o.b)("p",null,"Type: ",Object(o.b)("inlineCode",{parentName:"p"},"object"),Object(o.b)("br",{parentName:"p"}),"\n","Default: ",Object(o.b)("inlineCode",{parentName:"p"},"{}"),"  "))}p.isMDXComponent=!0},411:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=a.a.createContext({}),s=function(e){var t=a.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},b=function(e){var t=s(e.components);return a.a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),b=s(n),m=r,d=b["".concat(i,".").concat(m)]||b[m]||p[m]||o;return n?a.a.createElement(d,c(c({ref:t},u),{},{components:n})):a.a.createElement(d,c({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var u=2;u<o;u++)i[u]=n[u];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},412:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.a=function(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}},413:function(e,t,n){"use strict";var r=n(0),a=n(414);t.a=function(){var e=Object(r.useContext)(a.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},414:function(e,t,n){"use strict";var r=n(0),a=Object(r.createContext)(void 0);t.a=a},415:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(413),i=n(412),c=n(56),l=n.n(c),u=37,s=39;t.a=function(e){var t=e.lazy,n=e.block,c=e.defaultValue,b=e.values,p=e.groupId,m=e.className,d=Object(o.a)(),f=d.tabGroupChoices,O=d.setTabGroupChoices,h=Object(r.useState)(c),y=h[0],j=h[1],v=r.Children.toArray(e.children);if(null!=p){var g=f[p];null!=g&&g!==y&&b.some((function(e){return e.value===g}))&&j(g)}var w=function(e){j(e),null!=p&&O(p,e)},x=[];return a.a.createElement("div",null,a.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(i.a)("tabs",{"tabs--block":n},m)},b.map((function(e){var t=e.value,n=e.label;return a.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":y===t,className:Object(i.a)("tabs__item",l.a.tabItem,{"tabs__item--active":y===t}),key:t,ref:function(e){return x.push(e)},onKeyDown:function(e){!function(e,t,n){switch(n.keyCode){case s:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case u:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(x,e.target,e)},onFocus:function(){return w(t)},onClick:function(){w(t)}},n)}))),t?Object(r.cloneElement)(v.filter((function(e){return e.props.value===y}))[0],{className:"margin-vert--md"}):a.a.createElement("div",{className:"margin-vert--md"},v.map((function(e,t){return Object(r.cloneElement)(e,{key:t,hidden:e.props.value!==y})}))))}},416:function(e,t,n){"use strict";var r=n(3),a=n(0),o=n.n(a);t.a=function(e){var t=e.children,n=e.hidden,a=e.className;return o.a.createElement("div",Object(r.a)({role:"tabpanel"},{hidden:n,className:a}),t)}}}]);