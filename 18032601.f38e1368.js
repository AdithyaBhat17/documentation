(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{106:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return s})),a.d(t,"metadata",(function(){return c})),a.d(t,"toc",(function(){return l})),a.d(t,"default",(function(){return d}));var n=a(3),o=a(7),r=(a(0),a(471)),i=["components"],s={title:"Chat widget payload",sidebar_label:"Chat widget payload"},c={unversionedId:"platform_concepts/channelConfiguration/chat-widget-payload",id:"platform_concepts/channelConfiguration/chat-widget-payload",isDocsHomePage:!1,title:"Chat widget payload",description:"A payload is used to pass the website's information to the bot.",source:"@site/docs/platform_concepts/channelConfiguration/chat-widget-payload.md",slug:"/platform_concepts/channelConfiguration/chat-widget-payload",permalink:"/docs/platform_concepts/channelConfiguration/chat-widget-payload",version:"current",sidebar_label:"Chat widget payload",sidebar:"platform_concepts",previous:{title:"Chat widget",permalink:"/docs/platform_concepts/channelConfiguration/web-widget"},next:{title:"User authentication",permalink:"/docs/platform_concepts/channelConfiguration/user-authentication"}},l=[{value:'<a name="payload"></a> 1. Pass values from the web client to the bot',id:"1-pass-values-from-the-web-client-to-the-bot",children:[]}],p={toc:l};function d(e){var t=e.components,a=Object(o.a)(e,i);return Object(r.b)("wrapper",Object(n.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"A payload is used to pass the website's information to the bot.  "),Object(r.b)("p",null,"Consider that you have a requirement to pass the data of the user who is using the chat widget. In such cases, you can use payload to pass data from your website to the bot. For example, payload passes the data such as account IDs, customer identifiers like names, email addresses, and phone numbers, or other metadata associated with a user from your website to the bot. "),Object(r.b)("p",null,"In the payload, you need to create a string that is a key - value pair consisting of data and its value (in lower case). The data must have string-to-string key-value pairs. Payload is passed in JSON format. An error is displayed when data other than key-value is passed in the JSON code. "),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),Object(r.b)("strong",{parentName:"h5"},"payload security"))),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"Payload is securely passed in HTTPS post request to secure the information passed in it."))),Object(r.b)("h2",{id:"1-pass-values-from-the-web-client-to-the-bot"},Object(r.b)("a",{name:"payload"})," 1. Pass values from the web client to the bot"),Object(r.b)("p",null,"To pass values from your parent interface to the bot, you can make use of ",Object(r.b)("strong",{parentName:"p"},"payload data"),", which needs to be configured in the bot script."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Sample bot script:")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},'<script type="text/javascript"> \n  window.ymConfig = {\n   "bot":"x1655954196162",\n  "host":"https://cloud.yellow.ai"};\n  (function () {var w=window,ic=w.YellowMessenger;\n  if("function"===typeof ic)\n     ic("reattach_activator"),ic("update",ymConfig);\n  else {\n     var d=document,i=function(){i.c(arguments)\n  };\n\n  function l(){var e=d.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cdn.yellowmessenger.com/plugin/widget-v2/latest/dist/main.min.js";var t=d.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}i.q=[],i.c=function(e){i.q.push(e)},w.YellowMessenger=i,w.attachEvent?w.attachEvent("onload",l):w.addEventListener("load",l,!1)}})();\n<\/script>\n\n')),Object(r.b)("p",null,"Add the payload data in the following bot script:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},'<script type="text/javascript">\n    window.ymConfig = \n    {\n      "bot":"ENTER_YOUR_BOT_ID_HERE",\n      "host":"https://cloud.yellow.ai",\n      \n      "payload":\n      {\n          "name": name,             // Add payload data here\n          "email": email           // The values can be dynamic\n      },\n      \n      "partiallyOpen":false,"alignLeft":"right"\n    };\n    .\n    .\n    .        //Rest of the chatbot script\n    .\n<\/script>\n')),Object(r.b)("p",null,"The bot is initilized when the page loads. Once the boat loads, you can assign these values to variables using ",Object(r.b)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/action-nodes/#variables"},"Variables node"),"."),Object(r.b)("p",null,"Variable format is ",Object(r.b)("inlineCode",{parentName:"p"},"{{{profile.payload.Your_Field_Name}}")),Object(r.b)("p",null,Object(r.b)("img",{parentName:"p",src:"https://i.imgur.com/3Np2ozp.png",alt:null})),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},"if(userIsAuthenticated) { \n\n// replace this with your own auth logic.\n    window.YellowMessengerPlugin.init({\n        payload: {\n            email: 'ted.lasso@yellow.ai',\n            member_id: '1231basd' // you can pass any info you want to be associated with the user based on your use case here. Note that this can be read by the bot using the {{profile.payload.member_id}} variable.\n        }\n    });\n    window.YellowMessengerPlugin.show(); // display the bot icon\n}\n")))}d.isMDXComponent=!0},471:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return m}));var n=a(0),o=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=o.a.createContext({}),p=function(e){var t=o.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},d=function(e){var t=p(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=o.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=p(a),b=n,m=d["".concat(i,".").concat(b)]||d[b]||u[b]||r;return a?o.a.createElement(m,s(s({ref:t},l),{},{components:a})):o.a.createElement(m,s({ref:t},l))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=b;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var l=2;l<r;l++)i[l]=a[l];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,a)}b.displayName="MDXCreateElement"}}]);