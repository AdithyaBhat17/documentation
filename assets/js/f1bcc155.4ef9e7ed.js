"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[40942],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(n),h=r,f=p["".concat(c,".").concat(h)]||p[h]||d[h]||a;return n?o.createElement(f,i(i({ref:t},u),{},{components:n})):o.createElement(f,i({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[p]="string"==typeof e?e:r,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},5721:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return p}});var o=n(87462),r=n(63366),a=(n(67294),n(3905)),i=["components"],s={title:"Display a message or/and trigger an action when chat is closed",sidebar_label:"End of the live chat"},c=void 0,l={unversionedId:"cookbooks/inbox/ticketclose-message",id:"cookbooks/inbox/ticketclose-message",title:"Display a message or/and trigger an action when chat is closed",description:"When a customer initiates a live chat, an inbox agent is assigned to resolve the query. After resolving the query, the agent marks the chat as resolved, which triggers the node connected to the ticket closed in the raise ticket node. If the CSAT setting is enabled, the system records the customer feedback on the agent before closing the chat.",source:"@site/docs/cookbooks/inbox/ticketclose-message.md",sourceDirName:"cookbooks/inbox",slug:"/cookbooks/inbox/ticketclose-message",permalink:"/docs/cookbooks/inbox/ticketclose-message",draft:!1,tags:[],version:"current",frontMatter:{title:"Display a message or/and trigger an action when chat is closed",sidebar_label:"End of the live chat"},sidebar:"cookbooks",previous:{title:"Alias name for agents",permalink:"/docs/cookbooks/inbox/alias"},next:{title:"Ticket notification to unavailable agents",permalink:"/docs/cookbooks/inbox/notifyagents"}},u={},p=[],d={toc:p};function h(e){var t=e.components,n=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"When a customer initiates a live chat, an inbox agent is assigned to resolve the query. After resolving the query, the agent marks the chat as resolved, which triggers the node connected to the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/action-nodes#raise-ticket-outputs"},"ticket closed")," in the raise ticket node. If the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/inbox/inbox-settings/workflows/csat"},"CSAT setting")," is enabled, the system records the customer feedback on the agent before closing the chat."),(0,a.kt)("p",null,"Alternatively, if you prefer not to use the above options, you can configure the system to automatically trigger an event when agents resolve a live chat.\nFor example, you may want to send the customer details to the CSM or perform other actions like updating a database, calling an API, or displaying promotional messages or products after the chat has ended. However, you cannot directly connect the ticket closed part of the raise ticket node to both options simultaneously. In such cases, you can use an event to identify the ticket closed and perform background actions on a different flow, and then connect the raise ticket - ticket closed part of the node to a different flow."),(0,a.kt)("p",null,"This requires manual enabling from the event hub and use in the flows. The steps are given below:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Go to ",(0,a.kt)("strong",{parentName:"li"},"Studio")," > ",(0,a.kt)("strong",{parentName:"li"},"Events")," > ",(0,a.kt)("strong",{parentName:"li"},"Inbox")," and search for ",(0,a.kt)("strong",{parentName:"li"},"ticket-closed"),".\n",(0,a.kt)("img",{parentName:"li",src:"https://i.imgur.com/qZYPSZ2.png",alt:null})),(0,a.kt)("li",{parentName:"ol"},"Click the three dots icon and select ",(0,a.kt)("strong",{parentName:"li"},"Activate")," to activate the event."),(0,a.kt)("li",{parentName:"ol"},"Create a new ",(0,a.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/Flows/journeys"},"flow")," with the trigger set to ",(0,a.kt)("strong",{parentName:"li"},"Event")," and value set to ",(0,a.kt)("strong",{parentName:"li"},"ticket-closed"),".\n",(0,a.kt)("img",{parentName:"li",src:"https://i.imgur.com/5J4tjm4.png",alt:null})),(0,a.kt)("li",{parentName:"ol"},"To provide a personalized response from the bot when a ticket is closed, add ",(0,a.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes"},"nodes")," to the flow that are designed to execute specific tasks. The flow will automatically run whenever a ticket is closed.\n",(0,a.kt)("img",{parentName:"li",src:"https://i.imgur.com/9Uu83EZ.png",alt:null}))))}h.isMDXComponent=!0}}]);