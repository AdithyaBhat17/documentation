"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[41158],{3905:function(e,t,r){r.d(t,{Zo:function(){return d},kt:function(){return m}});var n=r(67294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=n.createContext({}),u=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},d=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=u(r),h=i,m=p["".concat(l,".").concat(h)]||p[h]||c[h]||a;return r?n.createElement(m,o(o({ref:t},d),{},{components:r})):n.createElement(m,o({ref:t},d))}));function m(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=r.length,o=new Array(a);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:i,o[1]=s;for(var u=2;u<a;u++)o[u]=r[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},52360:function(e,t,r){r.r(t),r.d(t,{assets:function(){return d},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var n=r(87462),i=r(63366),a=(r(67294),r(3905)),o=["components"],s={title:"How user records are created through conversations & unified in User 360?",sidebar_label:"How are user records created from conversations & unified in User 360"},l=void 0,u={unversionedId:"platform_concepts/engagement/cdp/user_data/data_capture_convers",id:"platform_concepts/engagement/cdp/user_data/data_capture_convers",title:"How user records are created through conversations & unified in User 360?",description:"This article provides complete information on how user records are automatically created in User 360 and unified based on bot conversations.",source:"@site/docs/platform_concepts/engagement/cdp/user_data/data_capture_convers.md",sourceDirName:"platform_concepts/engagement/cdp/user_data",slug:"/platform_concepts/engagement/cdp/user_data/data_capture_convers",permalink:"/docs/platform_concepts/engagement/cdp/user_data/data_capture_convers",draft:!1,tags:[],version:"current",frontMatter:{title:"How user records are created through conversations & unified in User 360?",sidebar_label:"How are user records created from conversations & unified in User 360"},sidebar:"platform_concepts",previous:{title:"Import users",permalink:"/docs/platform_concepts/engagement/cdp/user_data/import_users"},next:{title:"Add/update user properties from bot conversations",permalink:"/docs/platform_concepts/engagement/cdp/user_data/store_conv_data"}},d={},p=[{value:"How are unidentified records auto-created from bot conversations?",id:"how-are-unidentified-records-auto-created-from-bot-conversations",level:2},{value:"Auto-capturing of location-specific information",id:"auto-capturing-of-location-specific-information",level:3},{value:"What happens to the record when the user is identified?",id:"what-happens-to-the-record-when-the-user-is-identified",level:2},{value:"When a new user ID is captured",id:"when-a-new-user-id-is-captured",level:3},{value:"When an existing user ID is captured",id:"when-an-existing-user-id-is-captured",level:3},{value:"Scenarios in which merging of user properties happen",id:"scenarios-in-which-merging-of-user-properties-happen",level:2},{value:"Scenario 1: When an unidentified record is identified as an existing record",id:"scenario-1-when-an-unidentified-record-is-identified-as-an-existing-record",level:4},{value:"Scenario 2: When an unidentified record is identified on a different channel",id:"scenario-2-when-an-unidentified-record-is-identified-on-a-different-channel",level:4},{value:"Effect of merging on user properties",id:"effect-of-merging-on-user-properties",level:3},{value:"What happens when the user ID is recaptured?",id:"what-happens-when-the-user-id-is-recaptured",level:2},{value:"When the new user Id already exists",id:"when-the-new-user-id-already-exists",level:3},{value:"When the new user Id does not exist",id:"when-the-new-user-id-does-not-exist",level:3}],c={toc:p};function h(e){var t=e.components,r=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This article provides complete information on how user records are automatically created in User 360 and unified based on bot conversations."),(0,a.kt)("p",null,"Bot users are classified into the following categories:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Unidentified user - A user whose user ID is not known or captured by the bot yet."),(0,a.kt)("li",{parentName:"ol"},"Identified user - A user whose user ID has been captured by the bot.")),(0,a.kt)("h2",{id:"how-are-unidentified-records-auto-created-from-bot-conversations"},"How are unidentified records auto-created from bot conversations?"),(0,a.kt)("p",null,"When a user starts a conversation with the bot and starts capturing user properties, it automatically creates a new unidentified record in User 360. A record for which the user ID is unknown is considered as an unidentified record."),(0,a.kt)("p",null,"   ",(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/3nMWou9.png",alt:null})),(0,a.kt)("h3",{id:"auto-capturing-of-location-specific-information"},"Auto-capturing of location-specific information"),(0,a.kt)("p",null,"To optimize your user records with better accuracy and enhance profile completeness, the system can auto-capture location specific information for Web and WhatsApp bots."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"For users on web bot, the system automatically captures location-specific information such as timezone and country. By using this information, you can create location-based segments that allow for personalized campaigns in Engage.")),(0,a.kt)("center",null,(0,a.kt)("img",{src:"https://i.imgur.com/l51XMt7.png",width:"80%"})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"For users on the WhatsApp bot, the system automatically captures the phone number and identifies their country and name. However, the system may not capture the user's name in all cases, as the user might not have provided it, or the name might contain numbers or special characters that fail validation for the ",(0,a.kt)("inlineCode",{parentName:"li"},"firstName")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"lastName")," properties.")),(0,a.kt)("p",null,"Any user property captured during the session will be stored in that unidentified record, until the ",(0,a.kt)("inlineCode",{parentName:"p"},"userId")," is captured. "),(0,a.kt)("center",null,(0,a.kt)("img",{src:"https://i.imgur.com/SL1Z0Ca.png",width:"80%"})),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"To know properties that are auto-captured for different channels, see ",(0,a.kt)("a",{parentName:"p",href:"/docs/platform_concepts/engagement/cdp/user_data/store_conv_data#automated-capturing-of-location-specific-data"},"Automated capturing of location-specific data"),".")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"what-happens-to-the-record-when-the-user-is-identified"},"What happens to the record when the user is identified?"),(0,a.kt)("p",null,"A user is identified through the user ID. A user ID is a unique indetifier such as mobile number, email address, or any other identifier such as driving livence number. "),(0,a.kt)("p",null,"You can capture the user ID through Prompt or Variable nodes when creating bot flows. The following sections explain how the current record is affected based on the user ID provided."),(0,a.kt)("h3",{id:"when-a-new-user-id-is-captured"},"When a new user ID is captured"),(0,a.kt)("p",null,"If the provided user ID does not exist in User 360, the current record will be updated with the user ID without affecting the details captured during the session."),(0,a.kt)("img",{src:"https://i.imgur.com/kWWhX4m.png",width:"90%"}),(0,a.kt)("h3",{id:"when-an-existing-user-id-is-captured"},"When an existing user ID is captured"),(0,a.kt)("p",null,"If the provided user ID already exists, it switches the mapping to the existing record and merges new details, without overriding the existing data. It then deletes the unidentified record."),(0,a.kt)("p",null,"These are the steps that take place:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"It ",(0,a.kt)("strong",{parentName:"p"},"Switches")," to the existing record."),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/v2rK5EV.png",alt:null})))),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"It then ",(0,a.kt)("strong",{parentName:"p"},"Merges")," the details that are not available in the existing record."),(0,a.kt)("center",null,(0,a.kt)("img",{src:"https://i.imgur.com/p9cDdHl.png",width:"90%"})),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Properties with single values"),":",(0,a.kt)("br",null),"\nThe user properties that are not present in the identified record will be obtained from the unidentified record. For example, refer to ",(0,a.kt)("inlineCode",{parentName:"li"},"emailOptin")," in the above table. ",(0,a.kt)("br",null),"The user properties that already exist in the identified record will be skipped without making any change. For example, refer to ",(0,a.kt)("inlineCode",{parentName:"li"},"firstName")," in the above table."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Properties with list values"),": The values will be unified. Example: ",(0,a.kt)("inlineCode",{parentName:"li"},"labels")," in the above table."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Auto-captured property values"),": The blank values for country and timezone in the existing record will be updated with the auto-captured values."))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"It deletes the unidentified record after merging. However, if either country or timezone is already captured in the existing record, no changes will be made to both the values as shown in the following."),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/68MCC0a.png",alt:null})))),(0,a.kt)("h2",{id:"scenarios-in-which-merging-of-user-properties-happen"},"Scenarios in which merging of user properties happen"),(0,a.kt)("p",null,"There are two scenarios in which merging of user properties can happen."),(0,a.kt)("h4",{id:"scenario-1-when-an-unidentified-record-is-identified-as-an-existing-record"},"Scenario 1: When an unidentified record is identified as an existing record"),(0,a.kt)("p",null,"This happens when an user ID provided for an unidentified record already exists in User 360."),(0,a.kt)("p",null,"In this, the mapping ",(0,a.kt)("strong",{parentName:"p"},"Switches")," to the existing record and the details that are not available in the existing record will be updated as explained in the following."),(0,a.kt)("p",null,"   ",(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/vfkGucl.png",alt:null})),(0,a.kt)("p",null,"See the ",(0,a.kt)("a",{parentName:"p",href:"#effect-of-merging-on-user-properties"},"Effect of merging on user properties"),"."),(0,a.kt)("h4",{id:"scenario-2-when-an-unidentified-record-is-identified-on-a-different-channel"},"Scenario 2: When an unidentified record is identified on a different channel"),(0,a.kt)("p",null,"Consider a user who is on WhatsApp is identified on Web bot with the same user ID. Similar to the previous case, it switchs the current mapping to the existing record and then merges new details. For instance, consider a user already on WhatsApp, started a conversation on the web bot and provides the same user ID."),(0,a.kt)("img",{src:"https://i.imgur.com/QC5Bf0v.png",width:"90%"}),(0,a.kt)("p",null,"The existing property values will remain unchanged, and any missing property values will be added to the existing account."),(0,a.kt)("p",null,"Learn about the ",(0,a.kt)("a",{parentName:"p",href:"#effect-of-merging-on-user-properties"},"Effect of merging on user properties"),"."),(0,a.kt)("h3",{id:"effect-of-merging-on-user-properties"},"Effect of merging on user properties"),(0,a.kt)("p",null," The following are the effects of account merging:"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/hqybAgj.png",alt:null})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Properties with single values"),": ",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"The user properties that are not present in the identified record will be obtained from the unidentified record. For example, refer to ",(0,a.kt)("inlineCode",{parentName:"li"},"WhatsAppOptIn"),"."),(0,a.kt)("li",{parentName:"ul"},"User properties that already exist in the identified record will be ignored and no changes will be made to them. For example, ",(0,a.kt)("inlineCode",{parentName:"li"},"firstName")," in the above table."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Auto-captured property values"),": ",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"If the existing record has blank values, the country and timezone in the existing record will be updated with the auto-captured values."),(0,a.kt)("li",{parentName:"ul"},"If the existing record has some value for timezone or country, the system will skip those values without making any changes. "))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Properties with list values"),": These values will be unified. Example: ",(0,a.kt)("inlineCode",{parentName:"li"},"labels")," in the above table."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Unidentified record")," will be deleted post-merging.")),(0,a.kt)("h2",{id:"what-happens-when-the-user-id-is-recaptured"},"What happens when the user ID is recaptured?"),(0,a.kt)("p",null,"There could be cases when a user ID is recaptured. For example, the user logs out and logs in again or when the user whats interacts with the bot with a different user ID."),(0,a.kt)("h3",{id:"when-the-new-user-id-already-exists"},"When the new user Id already exists"),(0,a.kt)("p",null,"When a user provides a new user ID that already exists in User 360, the chatbot will switch the current record mapping to the respective record that already exists. It uses information associated with that user ID to personalize conversations."),(0,a.kt)("p",null,"   ",(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/Ew2Efrb.png",alt:null})),(0,a.kt)("h3",{id:"when-the-new-user-id-does-not-exist"},"When the new user Id does not exist"),(0,a.kt)("p",null,"The chatbot will create a new record with the provided user ID. This means that the chatbot will treat the user as a new user and will not have access to any previous information or conversation history associated with that user. However, the chatbot can still capture new information about the user's preferences and behavior going forward, which can be used to personalize future interactions."),(0,a.kt)("p",null,"   ",(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/pPxBuhn.png",alt:null})))}h.isMDXComponent=!0}}]);