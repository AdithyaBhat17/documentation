"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[38033],{3905:function(t,e,n){n.d(e,{Zo:function(){return u},kt:function(){return g}});var a=n(67294);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,a,o=function(t,e){if(null==t)return{};var n,a,o={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var s=a.createContext({}),c=function(t){var e=a.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):l(l({},e),t)),n},u=function(t){var e=c(t.components);return a.createElement(s.Provider,{value:e},t.children)},p="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},d=a.forwardRef((function(t,e){var n=t.components,o=t.mdxType,r=t.originalType,s=t.parentName,u=i(t,["components","mdxType","originalType","parentName"]),p=c(n),d=o,g=p["".concat(s,".").concat(d)]||p[d]||m[d]||r;return n?a.createElement(g,l(l({ref:e},u),{},{components:n})):a.createElement(g,l({ref:e},u))}));function g(t,e){var n=arguments,o=e&&e.mdxType;if("string"==typeof t||o){var r=n.length,l=new Array(r);l[0]=d;var i={};for(var s in e)hasOwnProperty.call(e,s)&&(i[s]=e[s]);i.originalType=t,i[p]="string"==typeof t?t:o,l[1]=i;for(var c=2;c<r;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},56193:function(t,e,n){n.r(e),n.d(e,{assets:function(){return u},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return p}});var a=n(87462),o=n(63366),r=(n(67294),n(3905)),l=["components"],i={title:"Function",sidebar_label:"Function (code)",keywords:["code","function","math","calculations"]},s=void 0,c={unversionedId:"platform_concepts/studio/build/code",id:"platform_concepts/studio/build/code",title:"Function",description:"Functions allow you to implement custom logic and perform various actions within your bot. It offers flexibility beyond the bot's built-in capabilities.",source:"@site/docs/platform_concepts/studio/build/code.md",sourceDirName:"platform_concepts/studio/build",slug:"/platform_concepts/studio/build/code",permalink:"/docs/platform_concepts/studio/build/code",draft:!1,tags:[],version:"current",frontMatter:{title:"Function",sidebar_label:"Function (code)",keywords:["code","function","math","calculations"]},sidebar:"platform_concepts",previous:{title:"Personalise conversations with user properties",permalink:"/docs/platform_concepts/engagement/cdp/user_data/personalise_conversations"},next:{title:"Bot Variables",permalink:"/docs/platform_concepts/studio/build/bot-variables"}},u={},p=[{value:"Create a function",id:"create-a-function",level:2},{value:"Format of functions",id:"format-of-functions",level:3},{value:"Function arguments",id:"function-arguments",level:3},{value:"Create a new function",id:"create-a-new-function",level:3},{value:"Tools and other settings",id:"tools-and-other-settings",level:2},{value:"Tools",id:"tools",level:4},{value:"Logs",id:"logs",level:4},{value:"Compare",id:"compare",level:4},{value:"Flows",id:"flows",level:4},{value:"Localization",id:"localization",level:4},{value:"Using functions in flows",id:"using-functions-in-flows",level:2}],m={toc:p};function d(t){var e=t.components,n=(0,o.Z)(t,l);return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Functions allow you to implement custom logic and perform various actions within your bot. It offers flexibility beyond the bot's built-in capabilities."),(0,r.kt)("p",null,"Some of the common examples for writing custom logic include extracting specific information from API responses, performing mathematical calculations, decoding and much more. The possibilities extend far beyond these examples, making ",(0,r.kt)("strong",{parentName:"p"},"Functions")," a versatile feature to use the bot to the fullest."),(0,r.kt)("h2",{id:"create-a-function"},"Create a function"),(0,r.kt)("p",null,"This section covers the format for writing custom logic, the available arguments for data retrieval, and how to create functions using this information."),(0,r.kt)("h3",{id:"format-of-functions"},"Format of functions"),(0,r.kt)("p",null,"In the following snippet, you need to replace the line 'Your logic goes here' with your own code to implement the desired functionality."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"return new Promise(resolve => {\n      // Your logic goes here\n      resolve();\n  }); \n")),(0,r.kt)("p",null,"When you click ",(0,r.kt)("strong",{parentName:"p"},"+ Add new function"),", the platform automatically provides you with this pre-built snippet. "),(0,r.kt)("h3",{id:"function-arguments"},"Function arguments"),(0,r.kt)("p",null,"In your code, you can use the following arguments to access specific pieces of information."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"arg"),(0,r.kt)("th",{parentName:"tr",align:null},"Data type"),(0,r.kt)("th",{parentName:"tr",align:null},"Use"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"data.variables.<variable_name>"),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"To access any bot variable in the function.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"data.channel"),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"To access channel names like whatsapp, yellowmessenger, facebook, etc.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"data.profile"),(0,r.kt)("td",{parentName:"tr",align:null},"Object"),(0,r.kt)("td",{parentName:"tr",align:null},"Contains user properties  such as  name, number, email, city , country, language.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"data.sender"),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"User ID")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"data.bot"),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"Bot ID")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"data.message"),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"To access Last/latest user message in the conversation.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"data.event.<event_name>"),(0,r.kt)("td",{parentName:"tr",align:null},"Object"),(0,r.kt)("td",{parentName:"tr",align:null},"To access events in the function.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ymLib.args.apiResponse"),(0,r.kt)("td",{parentName:"tr",align:null},"any"),(0,r.kt)("td",{parentName:"tr",align:null},"To access API response in API transformation function.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ymLib.args.logger"),(0,r.kt)("td",{parentName:"tr",align:null},"Object"),(0,r.kt)("td",{parentName:"tr",align:null},"Can be used to add logs.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"context.history"),(0,r.kt)("td",{parentName:"tr",align:null},"Object"),(0,r.kt)("td",{parentName:"tr",align:null},"Contains history of nodes visited by user.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"prediction.intents"),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"To get ",(0,r.kt)("a",{parentName:"td",href:"https://docs.yellow.ai/docs/platform_concepts/studio/train/intents"},"intents")," predicted from the user message.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"prediction.entities"),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"To get ",(0,r.kt)("a",{parentName:"td",href:"https://docs.yellow.ai/docs/platform_concepts/studio/train/entities"},"entities")," predicted from the user message.")))),(0,r.kt)("h3",{id:"create-a-new-function"},"Create a new function"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("strong",{parentName:"li"},"Studio")," > ",(0,r.kt)("strong",{parentName:"li"},"Functions")," > ",(0,r.kt)("strong",{parentName:"li"},"+ Add new function"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/KacI9y0.png",alt:null})," "),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Provide a name to your function and click  ",(0,r.kt)("strong",{parentName:"li"},"Add function"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/o1446YR.png",alt:null})),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Type your custom logic and click ",(0,r.kt)("strong",{parentName:"li"},"Save"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/V5K8u7h.png",alt:null})),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Click the warnings option at the bottom to rectify the displayed warnings/errors.")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/ynPVSqT.png",alt:null})),(0,r.kt)("h2",{id:"tools-and-other-settings"},"Tools and other settings"),(0,r.kt)("p",null,"This section has some funcionalities common to the entire bot."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/zU0Hk1n.png",alt:null})),(0,r.kt)("h4",{id:"tools"},"Tools"),(0,r.kt)("p",null,"This is a global testing and settings tab. Click ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/tools#21-test-your-bot"},"here")," to learn more."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/tP1JZpa.png",alt:null})),(0,r.kt)("h4",{id:"logs"},"Logs"),(0,r.kt)("p",null,"This option shows all the logs related to functions, you can learn more about this by clicking ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/test-and-publish-bot/debug-flow#31-view-code-logs"},"here"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/gCkDZOH.png",alt:null})),(0,r.kt)("h4",{id:"compare"},"Compare"),(0,r.kt)("p",null,"This option compares the function between staging and production environments depending on the environment the bot is currently in. "),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/o39MHHR.png",alt:null})),(0,r.kt)("h4",{id:"flows"},"Flows"),(0,r.kt)("p",null,"Flows allow quick copying and accessing of flows using their names. You can easily copy the flow name and click the flow link to be redirected to the specific flow. This feature also allows you to view the nodes used in each flow."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/V4xtEBV.png",alt:null})),(0,r.kt)("h4",{id:"localization"},"Localization"),(0,r.kt)("p",null,"The Localization feature lets you add a code that handles the translation process. To know more, click ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/localization#-12-add-translations-using-code"},"here"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/EtE2V9v.png",alt:null})),(0,r.kt)("h2",{id:"using-functions-in-flows"},"Using functions in flows"),(0,r.kt)("p",null,"Functions are used in flows via the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/action-nodes#24-function"},"Function node"),". "),(0,r.kt)("p",null,"The following is an example where the function node is used to convert minutes to seconds."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a flow with the ",(0,r.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/prompt-nodes#21-question"},"Question node")," to take an input from the user and store the response in a variable, pizzamin.")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/FS5E7IW.png",alt:null})),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("strong",{parentName:"li"},"Functions"),", pass this variable and write a code to convert minutes to seconds.")),(0,r.kt)("p",null,"For example,"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"return new Promise(resolve => {\n    let minutesTaken = data.variables.pizzamin;\n    let secondsTaken = minutesTaken * 60;\n    let stringSeconds = secondsTaken.toString();\n    resolve(stringSeconds);\n  });                          \n  \n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Include a function node, pass the function created in the previous step, and store the response in another variable, pizzasec.")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/0rC44SF.png",alt:null})),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"To display the result to the end user, include a ",(0,r.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/message-nodes#2-text"},"text node")," and choose the pizzasec variable.")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/lpEw972.png",alt:null})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Result:")),(0,r.kt)("img",{src:"https://i.imgur.com/dBTzVuR.png",alt:"drawing",width:"50%"}),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"What Next?")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create your own function and use it by adding an ",(0,r.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/action-nodes#api"},"API node")," in the flow."),(0,r.kt)("li",{parentName:"ul"},"You can visit our ",(0,r.kt)("a",{parentName:"li",href:"https://community.yellow.ai/"},"community")," and share your ideas with other fellow bot builders.")))}d.isMDXComponent=!0}}]);