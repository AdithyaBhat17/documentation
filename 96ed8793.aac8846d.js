(window.webpackJsonp=window.webpackJsonp||[]).push([[206],{283:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return s})),t.d(n,"metadata",(function(){return l})),t.d(n,"toc",(function(){return u})),t.d(n,"default",(function(){return p}));var a=t(3),r=t(7),o=(t(0),t(411)),c=t(415),i=t(416),s={title:"subprocess",type:"input",status:"beta",categories:["Utility"]},l={unversionedId:"components/inputs/subprocess",id:"components/inputs/subprocess",isDocsHomePage:!1,title:"subprocess",description:"\x3c!--",source:"@site/docs/components/inputs/subprocess.md",slug:"/components/inputs/subprocess",permalink:"/docs/components/inputs/subprocess",editUrl:"https://github.com/Jeffail/benthos/edit/master/website/docs/components/inputs/subprocess.md",version:"current",sidebar:"docs",previous:{title:"stdin",permalink:"/docs/components/inputs/stdin"},next:{title:"websocket",permalink:"/docs/components/inputs/websocket"}},u=[{value:"Fields",id:"fields",children:[{value:"<code>name</code>",id:"name",children:[]},{value:"<code>args</code>",id:"args",children:[]},{value:"<code>codec</code>",id:"codec",children:[]},{value:"<code>restart_on_exit</code>",id:"restart_on_exit",children:[]},{value:"<code>max_buffer</code>",id:"max_buffer",children:[]}]}],b={toc:u};function p(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},b,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("p",null,"BETA: This component is mostly stable but breaking changes could still be made outside of major version releases if a fundamental problem with the component is found."),Object(o.b)("p",null,"Executes a command, runs it as a subprocess, and consumes messages from it over stdout."),Object(o.b)(c.a,{defaultValue:"common",values:[{label:"Common",value:"common"},{label:"Advanced",value:"advanced"}],mdxType:"Tabs"},Object(o.b)(i.a,{value:"common",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),'# Common config fields, showing default values\ninput:\n  subprocess:\n    name: ""\n    args: []\n    codec: lines\n    restart_on_exit: false\n'))),Object(o.b)(i.a,{value:"advanced",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),'# All config fields, showing default values\ninput:\n  subprocess:\n    name: ""\n    args: []\n    codec: lines\n    restart_on_exit: false\n    max_buffer: 65536\n')))),Object(o.b)("p",null,"Messages are consumed according to a specified codec. The command is executed once and if it terminates the input also closes down gracefully. Alternatively, the field ",Object(o.b)("inlineCode",{parentName:"p"},"restart_on_close")," can be set to ",Object(o.b)("inlineCode",{parentName:"p"},"true")," in order to have Benthos re-execute the command each time it stops."),Object(o.b)("p",null,"The field ",Object(o.b)("inlineCode",{parentName:"p"},"max_buffer")," defines the maximum message size able to be read from the subprocess. This value should be set significantly above the real expected maximum message size."),Object(o.b)("p",null,"The execution environment of the subprocess is the same as the Benthos instance, including environment variables and the current working directory."),Object(o.b)("h2",{id:"fields"},"Fields"),Object(o.b)("h3",{id:"name"},Object(o.b)("inlineCode",{parentName:"h3"},"name")),Object(o.b)("p",null,"The command to execute as a subprocess."),Object(o.b)("p",null,"Type: ",Object(o.b)("inlineCode",{parentName:"p"},"string"),Object(o.b)("br",{parentName:"p"}),"\n","Default: ",Object(o.b)("inlineCode",{parentName:"p"},'""'),"  "),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),"# Examples\n\nname: cat\n\nname: sed\n\nname: awk\n")),Object(o.b)("h3",{id:"args"},Object(o.b)("inlineCode",{parentName:"h3"},"args")),Object(o.b)("p",null,"A list of arguments to provide the command."),Object(o.b)("p",null,"Type: ",Object(o.b)("inlineCode",{parentName:"p"},"array"),Object(o.b)("br",{parentName:"p"}),"\n","Default: ",Object(o.b)("inlineCode",{parentName:"p"},"[]"),"  "),Object(o.b)("h3",{id:"codec"},Object(o.b)("inlineCode",{parentName:"h3"},"codec")),Object(o.b)("p",null,"The way in which messages should be consumed from the subprocess."),Object(o.b)("p",null,"Type: ",Object(o.b)("inlineCode",{parentName:"p"},"string"),Object(o.b)("br",{parentName:"p"}),"\n","Default: ",Object(o.b)("inlineCode",{parentName:"p"},'"lines"'),Object(o.b)("br",{parentName:"p"}),"\n","Options: ",Object(o.b)("inlineCode",{parentName:"p"},"lines"),"."),Object(o.b)("h3",{id:"restart_on_exit"},Object(o.b)("inlineCode",{parentName:"h3"},"restart_on_exit")),Object(o.b)("p",null,"Whether the command should be re-executed each time the subprocess ends."),Object(o.b)("p",null,"Type: ",Object(o.b)("inlineCode",{parentName:"p"},"bool"),Object(o.b)("br",{parentName:"p"}),"\n","Default: ",Object(o.b)("inlineCode",{parentName:"p"},"false"),"  "),Object(o.b)("h3",{id:"max_buffer"},Object(o.b)("inlineCode",{parentName:"h3"},"max_buffer")),Object(o.b)("p",null,"The maximum expected size of an individual message."),Object(o.b)("p",null,"Type: ",Object(o.b)("inlineCode",{parentName:"p"},"number"),Object(o.b)("br",{parentName:"p"}),"\n","Default: ",Object(o.b)("inlineCode",{parentName:"p"},"65536"),"  "))}p.isMDXComponent=!0},411:function(e,n,t){"use strict";t.d(n,"a",(function(){return b})),t.d(n,"b",(function(){return d}));var a=t(0),r=t.n(a);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=r.a.createContext({}),u=function(e){var n=r.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},b=function(e){var n=u(e.components);return r.a.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},m=r.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),b=u(t),m=a,d=b["".concat(c,".").concat(m)]||b[m]||p[m]||o;return t?r.a.createElement(d,i(i({ref:n},l),{},{components:t})):r.a.createElement(d,i({ref:n},l))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,c=new Array(o);c[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,c[1]=i;for(var l=2;l<o;l++)c[l]=t[l];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},412:function(e,n,t){"use strict";function a(e){var n,t,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=a(e[n]))&&(r&&(r+=" "),r+=t);else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}n.a=function(){for(var e,n,t=0,r="";t<arguments.length;)(e=arguments[t++])&&(n=a(e))&&(r&&(r+=" "),r+=n);return r}},413:function(e,n,t){"use strict";var a=t(0),r=t(414);n.a=function(){var e=Object(a.useContext)(r.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},414:function(e,n,t){"use strict";var a=t(0),r=Object(a.createContext)(void 0);n.a=r},415:function(e,n,t){"use strict";var a=t(0),r=t.n(a),o=t(413),c=t(412),i=t(56),s=t.n(i),l=37,u=39;n.a=function(e){var n=e.lazy,t=e.block,i=e.defaultValue,b=e.values,p=e.groupId,m=e.className,d=Object(o.a)(),f=d.tabGroupChoices,O=d.setTabGroupChoices,j=Object(a.useState)(i),h=j[0],v=j[1],y=a.Children.toArray(e.children);if(null!=p){var g=f[p];null!=g&&g!==h&&b.some((function(e){return e.value===g}))&&v(g)}var x=function(e){v(e),null!=p&&O(p,e)},N=[];return r.a.createElement("div",null,r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(c.a)("tabs",{"tabs--block":t},m)},b.map((function(e){var n=e.value,t=e.label;return r.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":h===n,className:Object(c.a)("tabs__item",s.a.tabItem,{"tabs__item--active":h===n}),key:n,ref:function(e){return N.push(e)},onKeyDown:function(e){!function(e,n,t){switch(t.keyCode){case u:!function(e,n){var t=e.indexOf(n)+1;e[t]?e[t].focus():e[0].focus()}(e,n);break;case l:!function(e,n){var t=e.indexOf(n)-1;e[t]?e[t].focus():e[e.length-1].focus()}(e,n)}}(N,e.target,e)},onFocus:function(){return x(n)},onClick:function(){x(n)}},t)}))),n?Object(a.cloneElement)(y.filter((function(e){return e.props.value===h}))[0],{className:"margin-vert--md"}):r.a.createElement("div",{className:"margin-vert--md"},y.map((function(e,n){return Object(a.cloneElement)(e,{key:n,hidden:e.props.value!==h})}))))}},416:function(e,n,t){"use strict";var a=t(3),r=t(0),o=t.n(r);n.a=function(e){var n=e.children,t=e.hidden,r=e.className;return o.a.createElement("div",Object(a.a)({role:"tabpanel"},{hidden:t,className:r}),n)}}}]);