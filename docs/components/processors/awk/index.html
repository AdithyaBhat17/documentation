<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Yellow Messenger Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Yellow Messenger Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-135959729-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">awk | Yellow Messenger</title><meta data-react-helmet="true" property="og:image" content="https://docs.yellowmessenger.com/img/og_img.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.yellowmessenger.com/img/og_img.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Yellow Messenger"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="awk | Yellow Messenger"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><meta data-react-helmet="true" property="og:url" content="https://docs.yellowmessenger.com/docs/components/processors/awk"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.yellowmessenger.com/docs/components/processors/awk"><link rel="stylesheet" href="/styles.5559d08e.css">
<link rel="preload" href="/styles.e4d5cb5b.js" as="script">
<link rel="preload" href="/runtime~main.e88295cd.js" as="script">
<link rel="preload" href="/main.c8e4b053.js" as="script">
<link rel="preload" href="/1.5924ca73.js" as="script">
<link rel="preload" href="/2.b09603a0.js" as="script">
<link rel="preload" href="/333.fa5c3434.js" as="script">
<link rel="preload" href="/332.1fbf5b90.js" as="script">
<link rel="preload" href="/935f2afb.ad0a51ea.js" as="script">
<link rel="preload" href="/17896441.ea7c0357.js" as="script">
<link rel="preload" href="/681adb9a.60768370.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link" href="/docs/about">Docs</a><a class="navbar__item navbar__link" href="/cookbooks">Cookbooks</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/videos">Videos</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/community">Community</a><a href="https://lab.benthos.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Lab</a><a href="https://github.com/Jeffail/benthos/releases/latest" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-download-link header-icon-link" aria-label="Download"></a><a href="https://github.com/Jeffail/benthos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link header-icon-link" aria-label="GitHub repository"></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/about">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/cookbooks">Cookbooks</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/videos">Videos</a></li><li class="menu__list-item"><a class="menu__link" href="/community">Community</a></li><li class="menu__list-item"><a href="https://lab.benthos.dev" target="_blank" rel="noopener noreferrer" class="menu__link">Lab</a></li><li class="menu__list-item"><a href="https://github.com/Jeffail/benthos/releases/latest" target="_blank" rel="noopener noreferrer" class="menu__link header-download-link header-icon-link" aria-label="Download"></a></li><li class="menu__list-item"><a href="https://github.com/Jeffail/benthos" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link header-icon-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/about">About</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/resources">Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/batching">Message Batching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/windowed_processing">Windowed Processing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/metadata">Metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/error_handling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/interpolation">Interpolation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/field_paths">Field Paths</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/processing_pipelines">Processing Pipelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/unit_testing">Unit Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/dynamic_inputs_and_outputs">Dynamic Inputs and Outputs</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/http/about">HTTP</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Inputs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/amqp_0_9">amqp_0_9</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/amqp_1">amqp_1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/aws_kinesis">aws_kinesis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/aws_s3">aws_s3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/aws_sqs">aws_sqs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/azure_blob_storage">azure_blob_storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/bloblang">bloblang</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/broker">broker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/csv">csv</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/dynamic">dynamic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/file">file</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/gcp_pubsub">gcp_pubsub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/hdfs">hdfs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/http_client">http_client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/http_server">http_server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/inproc">inproc</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/kafka">kafka</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/kinesis">kinesis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/mqtt">mqtt</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/nanomsg">nanomsg</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/nats">nats</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/nats_stream">nats_stream</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/nsq">nsq</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/read_until">read_until</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/redis_list">redis_list</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/redis_pubsub">redis_pubsub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/redis_streams">redis_streams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/resource">resource</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/s3">s3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/sequence">sequence</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/socket">socket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/socket_server">socket_server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/sqs">sqs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/stdin">stdin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/subprocess">subprocess</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/websocket">websocket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/zmq4">zmq4</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Experimental</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/sftp">sftp</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deprecated</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/amqp">amqp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/files">files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/kafka_balanced">kafka_balanced</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/kinesis_balanced">kinesis_balanced</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/tcp">tcp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/tcp_server">tcp_server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/udp_server">udp_server</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Processors</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/archive">archive</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/avro">avro</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/components/processors/awk">awk</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/aws_lambda">aws_lambda</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/bloblang">bloblang</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/bounds_check">bounds_check</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/branch">branch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/cache">cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/catch">catch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/compress">compress</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/decompress">decompress</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/dedupe">dedupe</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/for_each">for_each</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/grok">grok</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/group_by">group_by</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/group_by_value">group_by_value</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/http">http</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/insert_part">insert_part</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/jmespath">jmespath</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/jq">jq</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/json_schema">json_schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/log">log</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/metric">metric</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/noop">noop</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/parallel">parallel</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/parse_log">parse_log</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/protobuf">protobuf</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/rate_limit">rate_limit</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/redis">redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/resource">resource</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/select_parts">select_parts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/sleep">sleep</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/split">split</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/sql">sql</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/subprocess">subprocess</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/switch">switch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/sync_response">sync_response</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/throttle">throttle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/try">try</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/unarchive">unarchive</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/while">while</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/workflow">workflow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/xml">xml</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Deprecated</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/batch">batch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/conditional">conditional</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/decode">decode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/encode">encode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/filter">filter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/filter_parts">filter_parts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/hash">hash</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/hash_sample">hash_sample</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/json">json</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/lambda">lambda</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/merge_json">merge_json</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/metadata">metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/number">number</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/process_batch">process_batch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/process_dag">process_dag</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/process_field">process_field</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/process_map">process_map</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/sample">sample</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/text">text</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Outputs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/amqp_0_9">amqp_0_9</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/amqp_1">amqp_1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/aws_dynamodb">aws_dynamodb</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/aws_kinesis">aws_kinesis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/aws_kinesis_firehose">aws_kinesis_firehose</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/aws_s3">aws_s3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/aws_sns">aws_sns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/aws_sqs">aws_sqs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/azure_blob_storage">azure_blob_storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/azure_queue_storage">azure_queue_storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/azure_table_storage">azure_table_storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/broker">broker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/cache">cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/cassandra">cassandra</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/drop">drop</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/drop_on">drop_on</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/dynamic">dynamic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/elasticsearch">elasticsearch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/file">file</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/gcp_pubsub">gcp_pubsub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/hdfs">hdfs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/http_client">http_client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/http_server">http_server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/inproc">inproc</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/kafka">kafka</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/mqtt">mqtt</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/nanomsg">nanomsg</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/nats">nats</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/nats_stream">nats_stream</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/nsq">nsq</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/redis_hash">redis_hash</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/redis_list">redis_list</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/redis_pubsub">redis_pubsub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/redis_streams">redis_streams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/reject">reject</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/resource">resource</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/retry">retry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/socket">socket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/sql">sql</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/stdout">stdout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/subprocess">subprocess</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/switch">switch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/sync_response">sync_response</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/try">try</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/websocket">websocket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/zmq4">zmq4</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Experimental</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/sftp">sftp</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deprecated</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/amqp">amqp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/blob_storage">blob_storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/drop_on_error">drop_on_error</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/dynamodb">dynamodb</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/files">files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/kinesis">kinesis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/kinesis_firehose">kinesis_firehose</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/s3">s3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/sns">sns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/sqs">sqs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/table_storage">table_storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/tcp">tcp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/udp">udp</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Caches</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/aws_dynamodb">aws_dynamodb</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/aws_s3">aws_s3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/file">file</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/memcached">memcached</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/memory">memory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/multilevel">multilevel</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/redis">redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/ristretto">ristretto</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deprecated</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/dynamodb">dynamodb</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/s3">s3</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Rate Limits</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/rate_limits/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/rate_limits/local">local</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Buffers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/buffers/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/buffers/memory">memory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/buffers/none">none</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Metrics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/aws_cloudwatch">aws_cloudwatch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/http_server">http_server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/prometheus">prometheus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/statsd">statsd</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/stdout">stdout</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Experimental</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/influxdb">influxdb</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deprecated</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/blacklist">blacklist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/cloudwatch">cloudwatch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/rename">rename</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/whitelist">whitelist</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Tracers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/tracers/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/tracers/jaeger">jaeger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/tracers/none">none</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/logger/about">Logger</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/getting_started">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Bloblang</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/bloblang/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/bloblang/functions">Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/bloblang/methods">Methods</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/bloblang/advanced">Advanced</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/monitoring">Monitoring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/performance_tuning">Performance Tuning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/sync_responses">Synchronous Responses</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/aws">Amazon Web Services</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Serverless</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/serverless/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/serverless/lambda">Lambda</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Streams Mode</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/streams_mode/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/streams_mode/using_config_files">Streams Via Config Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/streams_mode/using_rest_api">Streams Via REST API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/streams_mode/streams_api">Streams API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Migration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/migration/v2">Migrating to Version 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/migration/v3">Migrating to Version 3</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">awk</h1></header><div class="markdown"><p>Executes an AWK program on messages. This processor is very powerful as it
offers a range of <a href="#awk-functions">custom functions</a> for querying and mutating
message contents and metadata.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1shy tabs__item--active">Common</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1shy">Advanced</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Common config fields, showing default values</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">awk</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">codec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> text</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">program</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BEGIN </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> x = 0 </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> print $0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x; x++ </span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># All config fields, showing default values</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">awk</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">codec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> text</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">program</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BEGIN </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> x = 0 </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> print $0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x; x++ </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">parts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></div></div><p>Works by feeding message contents as the program input based on a chosen
<a href="#codecs">codec</a> and replaces the contents of each message with the result. If
the result is empty (nothing is printed by the program) then the original
message contents remain unchanged.</p><p>Comes with a wide range of <a href="#awk-functions">custom functions</a> for accessing
message metadata, json fields, printing logs, etc. These functions can be
overridden by functions within the program.</p><p>Check out the <a href="#examples">examples section</a> in order to see how this processor
can be used.</p><p>This processor uses <a href="https://github.com/benhoyt/goawk" target="_blank" rel="noopener noreferrer">GoAWK</a>, in order to understand the differences
in how the program works you can <a href="https://github.com/benhoyt/goawk#differences-from-awk" target="_blank" rel="noopener noreferrer">read more about it here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fields"></a>Fields<a class="hash-link" href="#fields" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="codec"></a><code>codec</code><a class="hash-link" href="#codec" title="Direct link to heading">#</a></h3><p>A <a href="#codecs">codec</a> defines how messages should be inserted into the AWK program as variables. The codec does not change which <a href="#awk-functions">custom Benthos functions</a> are available. The <code>text</code> codec is the closest to a typical AWK use case.</p><p>Type: <code>string</code><br>
Default: <code>&quot;text&quot;</code><br>
Options: <code>none</code>, <code>text</code>, <code>json</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="program"></a><code>program</code><a class="hash-link" href="#program" title="Direct link to heading">#</a></h3><p>An AWK program to execute</p><p>Type: <code>string</code><br>
Default: <code>&quot;BEGIN { x = 0 } { print $0, x; x++ }&quot;</code>  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="parts"></a><code>parts</code><a class="hash-link" href="#parts" title="Direct link to heading">#</a></h3><p>An optional array of message indexes of a batch that the processor should apply to.
If left empty all messages are processed. This field is only applicable when
batching messages <a href="/docs/configuration/batching">at the input level</a>.</p><p>Indexes can be negative, and if so the part will be selected from the end
counting backwards starting from -1.</p><p>Type: <code>array</code><br>
Default: <code>[]</code>  </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="examples"></a>Examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h2><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1shy tabs__item--active">JSON Mapping and Arithmetic</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1shy">Stuff With Arrays</li></ul><div class="margin-vert--md"><div role="tabpanel"><p>Because AWK is a full programming language it&#x27;s much easier to map documents and
perform arithmetic with it than with other Benthos processors. For example, if
we were expecting documents of the form:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;doc&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;val1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;val2&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;add&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;doc&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;val1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;val2&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;multiply&quot;</span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>And we wished to perform the arithmetic specified in the <code>type</code> field,
on the values <code>val1</code> and <code>val2</code> and, finally, map the result into the
document, giving us the following resulting documents:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;doc&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;result&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;val1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;val2&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;add&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;doc&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;result&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;val1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;val2&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;multiply&quot;</span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>We can do that with the following:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">pipeline</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">awk</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">program</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        function map_add_vals() {</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          json_set_int(&quot;doc.result&quot;, json_get(&quot;doc.val1&quot;) + json_get(&quot;doc.val2&quot;));</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        function map_multiply_vals() {</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          json_set_int(&quot;doc.result&quot;, json_get(&quot;doc.val1&quot;) * json_get(&quot;doc.val2&quot;));</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        function map_unknown(type) {</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          json_set(&quot;error&quot;,&quot;unknown document type&quot;);</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          print_log(&quot;Document type not recognised: &quot; type, &quot;ERROR&quot;);</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          type = json_get(&quot;type&quot;);</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          if (type == &quot;add&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            map_add_vals();</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          else if (type == &quot;multiply&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            map_multiply_vals();</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          else</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            map_unknown(type);</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div><div role="tabpanel" hidden=""><p>It&#x27;s possible to iterate JSON arrays by appending an index value to the path,
this can be used to do things like removing duplicates from arrays. For example,
given the following input document:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;path&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;to&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;foos&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;one&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;two&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;three&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;two&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;four&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>We could create a new array <code>foos_unique</code> from <code>foos</code> giving us the result:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;path&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;to&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;foos&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;one&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;two&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;three&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;two&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;four&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;foos_unique&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;one&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;two&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;three&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;four&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>With the following config:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">pipeline</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">awk</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">program</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          array_path = &quot;path.to.foos&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          array_len = json_length(array_path)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          for (i = 0; i &lt; array_len; i++) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            ele = json_get(array_path &quot;.&quot; i)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            if ( ! ( ele in seen ) ) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              json_append(array_path &quot;_unique&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ele)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">              seen</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ele</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> = 1</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="codecs"></a>Codecs<a class="hash-link" href="#codecs" title="Direct link to heading">#</a></h2><p>The chosen codec determines how the contents of the message are fed into the
program. Codecs only impact the input string and variables initialised for your
program, they do not change the range of custom functions available.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="none"></a><code>none</code><a class="hash-link" href="#none" title="Direct link to heading">#</a></h3><p>An empty string is fed into the program. Functions can still be used in order to
extract and mutate metadata and message contents.</p><p>This is useful for when your program only uses functions and doesn&#x27;t need the
full text of the message to be parsed by the program, as it is significantly
faster.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="text"></a><code>text</code><a class="hash-link" href="#text" title="Direct link to heading">#</a></h3><p>The full contents of the message are fed into the program as a string, allowing
you to reference tokenised segments of the message with variables ($0, $1, etc).
Custom functions can still be used with this codec.</p><p>This is the default codec as it behaves most similar to typical usage of the awk
command line tool.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="json"></a><code>json</code><a class="hash-link" href="#json" title="Direct link to heading">#</a></h3><p>An empty string is fed into the program, and variables are automatically
initialised before execution of your program by walking the flattened JSON
structure. Each value is converted into a variable by taking its full path,
e.g. the object:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;foo&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;bar&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;created_at&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2018-12-18T11:57:32&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Would result in the following variable declarations:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">foo_bar_value = 10</span></div><div class="token-line" style="color:#393A34"><span class="token plain">foo_created_at = &quot;2018-12-18T11:57:32&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Custom functions can also still be used with this codec.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="awk-functions"></a>AWK Functions<a class="hash-link" href="#awk-functions" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="json_get"></a><code>json_get</code><a class="hash-link" href="#json_get" title="Direct link to heading">#</a></h3><p>Signature: <code>json_get(path)</code></p><p>Attempts to find a JSON value in the input message payload by a
<a href="/docs/configuration/field_paths">dot separated path</a> and returns it as a string.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="json_set"></a><code>json_set</code><a class="hash-link" href="#json_set" title="Direct link to heading">#</a></h3><p>Signature: <code>json_set(path, value)</code></p><p>Attempts to set a JSON value in the input message payload identified by a
<a href="/docs/configuration/field_paths">dot separated path</a>, the value argument will be interpreted
as a string.</p><p>In order to set non-string values use one of the following typed varieties:</p><ul><li><code>json_set_int(path, value)</code></li><li><code>json_set_float(path, value)</code></li><li><code>json_set_bool(path, value)</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="json_append"></a><code>json_append</code><a class="hash-link" href="#json_append" title="Direct link to heading">#</a></h3><p>Signature: <code>json_append(path, value)</code></p><p>Attempts to append a value to an array identified by a
<a href="/docs/configuration/field_paths">dot separated path</a>. If the target does not
exist it will be created. If the target exists but is not already an array then
it will be converted into one, with its original contents set to the first
element of the array.</p><p>The value argument will be interpreted as a string. In order to append
non-string values use one of the following typed varieties:</p><ul><li><code>json_append_int(path, value)</code></li><li><code>json_append_float(path, value)</code></li><li><code>json_append_bool(path, value)</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="json_delete"></a><code>json_delete</code><a class="hash-link" href="#json_delete" title="Direct link to heading">#</a></h3><p>Signature: <code>json_delete(path)</code></p><p>Attempts to delete a JSON field from the input message payload identified by a
<a href="/docs/configuration/field_paths">dot separated path</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="json_length"></a><code>json_length</code><a class="hash-link" href="#json_length" title="Direct link to heading">#</a></h3><p>Signature: <code>json_length(path)</code></p><p>Returns the size of the string or array value of JSON field from the input
message payload identified by a <a href="/docs/configuration/field_paths">dot separated path</a>.</p><p>If the target field does not exist, or is not a string or array type, then zero
is returned. In order to explicitly check the type of a field use <code>json_type</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="json_type"></a><code>json_type</code><a class="hash-link" href="#json_type" title="Direct link to heading">#</a></h3><p>Signature: <code>json_type(path)</code></p><p>Returns the type of a JSON field from the input message payload identified by a
<a href="/docs/configuration/field_paths">dot separated path</a>.</p><p>Possible values are: &quot;string&quot;, &quot;int&quot;, &quot;float&quot;, &quot;bool&quot;, &quot;undefined&quot;, &quot;null&quot;,
&quot;array&quot;, &quot;object&quot;.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="create_json_object"></a><code>create_json_object</code><a class="hash-link" href="#create_json_object" title="Direct link to heading">#</a></h3><p>Signature: <code>create_json_object(key1, val1, key2, val2, ...)</code></p><p>Generates a valid JSON object of key value pair arguments. The arguments are
variadic, meaning any number of pairs can be listed. The value will always
resolve to a string regardless of the value type. E.g. the following call:</p><p><code>create_json_object(&quot;a&quot;, &quot;1&quot;, &quot;b&quot;, 2, &quot;c&quot;, &quot;3&quot;)</code></p><p>Would result in this string:</p><p><code>{&quot;a&quot;:&quot;1&quot;,&quot;b&quot;:&quot;2&quot;,&quot;c&quot;:&quot;3&quot;}</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="create_json_array"></a><code>create_json_array</code><a class="hash-link" href="#create_json_array" title="Direct link to heading">#</a></h3><p>Signature: <code>create_json_array(val1, val2, ...)</code></p><p>Generates a valid JSON array of value arguments. The arguments are variadic,
meaning any number of values can be listed. The value will always resolve to a
string regardless of the value type. E.g. the following call:</p><p><code>create_json_array(&quot;1&quot;, 2, &quot;3&quot;)</code></p><p>Would result in this string:</p><p><code>[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;]</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="metadata_set"></a><code>metadata_set</code><a class="hash-link" href="#metadata_set" title="Direct link to heading">#</a></h3><p>Signature: <code>metadata_set(key, value)</code></p><p>Set a metadata key for the message to a value. The value will always resolve to
a string regardless of the value type.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="metadata_get"></a><code>metadata_get</code><a class="hash-link" href="#metadata_get" title="Direct link to heading">#</a></h3><p>Signature: <code>metadata_get(key) string</code></p><p>Get the value of a metadata key from the message.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="timestamp_unix"></a><code>timestamp_unix</code><a class="hash-link" href="#timestamp_unix" title="Direct link to heading">#</a></h3><p>Signature: <code>timestamp_unix() int</code></p><p>Returns the current unix timestamp (the number of seconds since 01-01-1970).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="timestamp_unix-1"></a><code>timestamp_unix</code><a class="hash-link" href="#timestamp_unix-1" title="Direct link to heading">#</a></h3><p>Signature: <code>timestamp_unix(date) int</code></p><p>Attempts to parse a date string by detecting its format and returns the
equivalent unix timestamp (the number of seconds since 01-01-1970).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="timestamp_unix-2"></a><code>timestamp_unix</code><a class="hash-link" href="#timestamp_unix-2" title="Direct link to heading">#</a></h3><p>Signature: <code>timestamp_unix(date, format) int</code></p><p>Attempts to parse a date string according to a format and returns the equivalent
unix timestamp (the number of seconds since 01-01-1970).</p><p>The format is defined by showing how the reference time, defined to be
<code>Mon Jan 2 15:04:05 -0700 MST 2006</code> would be displayed if it were the value.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="timestamp_unix_nano"></a><code>timestamp_unix_nano</code><a class="hash-link" href="#timestamp_unix_nano" title="Direct link to heading">#</a></h3><p>Signature: <code>timestamp_unix_nano() int</code></p><p>Returns the current unix timestamp in nanoseconds (the number of nanoseconds
since 01-01-1970).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="timestamp_unix_nano-1"></a><code>timestamp_unix_nano</code><a class="hash-link" href="#timestamp_unix_nano-1" title="Direct link to heading">#</a></h3><p>Signature: <code>timestamp_unix_nano(date) int</code></p><p>Attempts to parse a date string by detecting its format and returns the
equivalent unix timestamp in nanoseconds (the number of nanoseconds since
01-01-1970).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="timestamp_unix_nano-2"></a><code>timestamp_unix_nano</code><a class="hash-link" href="#timestamp_unix_nano-2" title="Direct link to heading">#</a></h3><p>Signature: <code>timestamp_unix_nano(date, format) int</code></p><p>Attempts to parse a date string according to a format and returns the equivalent
unix timestamp in nanoseconds (the number of nanoseconds since 01-01-1970).</p><p>The format is defined by showing how the reference time, defined to be
<code>Mon Jan 2 15:04:05 -0700 MST 2006</code> would be displayed if it were the value.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="timestamp_format"></a><code>timestamp_format</code><a class="hash-link" href="#timestamp_format" title="Direct link to heading">#</a></h3><p>Signature: <code>timestamp_format(unix, format) string</code></p><p>Formats a unix timestamp. The format is defined by showing how the reference
time, defined to be <code>Mon Jan 2 15:04:05 -0700 MST 2006</code> would be displayed if it
were the value.</p><p>The format is optional, and if omitted RFC3339 (<code>2006-01-02T15:04:05Z07:00</code>)
will be used.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="timestamp_format_nano"></a><code>timestamp_format_nano</code><a class="hash-link" href="#timestamp_format_nano" title="Direct link to heading">#</a></h3><p>Signature: <code>timestamp_format_nano(unixNano, format) string</code></p><p>Formats a unix timestamp in nanoseconds. The format is defined by showing how
the reference time, defined to be <code>Mon Jan 2 15:04:05 -0700 MST 2006</code> would be
displayed if it were the value.</p><p>The format is optional, and if omitted RFC3339 (<code>2006-01-02T15:04:05Z07:00</code>)
will be used.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="print_log"></a><code>print_log</code><a class="hash-link" href="#print_log" title="Direct link to heading">#</a></h3><p>Signature: <code>print_log(message, level)</code></p><p>Prints a Benthos log message at a particular log level. The log level is
optional, and if omitted the level <code>INFO</code> will be used.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Jeffail/benthos/edit/master/website/docs/components/processors/awk.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/components/processors/avro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« avro</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/components/processors/aws_lambda"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">aws_lambda »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#fields" class="table-of-contents__link">Fields</a><ul><li><a href="#codec" class="table-of-contents__link"><code>codec</code></a></li><li><a href="#program" class="table-of-contents__link"><code>program</code></a></li><li><a href="#parts" class="table-of-contents__link"><code>parts</code></a></li></ul></li><li><a href="#examples" class="table-of-contents__link">Examples</a></li><li><a href="#codecs" class="table-of-contents__link">Codecs</a><ul><li><a href="#none" class="table-of-contents__link"><code>none</code></a></li><li><a href="#text" class="table-of-contents__link"><code>text</code></a></li><li><a href="#json" class="table-of-contents__link"><code>json</code></a></li></ul></li><li><a href="#awk-functions" class="table-of-contents__link">AWK Functions</a><ul><li><a href="#json_get" class="table-of-contents__link"><code>json_get</code></a></li><li><a href="#json_set" class="table-of-contents__link"><code>json_set</code></a></li><li><a href="#json_append" class="table-of-contents__link"><code>json_append</code></a></li><li><a href="#json_delete" class="table-of-contents__link"><code>json_delete</code></a></li><li><a href="#json_length" class="table-of-contents__link"><code>json_length</code></a></li><li><a href="#json_type" class="table-of-contents__link"><code>json_type</code></a></li><li><a href="#create_json_object" class="table-of-contents__link"><code>create_json_object</code></a></li><li><a href="#create_json_array" class="table-of-contents__link"><code>create_json_array</code></a></li><li><a href="#metadata_set" class="table-of-contents__link"><code>metadata_set</code></a></li><li><a href="#metadata_get" class="table-of-contents__link"><code>metadata_get</code></a></li><li><a href="#timestamp_unix" class="table-of-contents__link"><code>timestamp_unix</code></a></li><li><a href="#timestamp_unix-1" class="table-of-contents__link"><code>timestamp_unix</code></a></li><li><a href="#timestamp_unix-2" class="table-of-contents__link"><code>timestamp_unix</code></a></li><li><a href="#timestamp_unix_nano" class="table-of-contents__link"><code>timestamp_unix_nano</code></a></li><li><a href="#timestamp_unix_nano-1" class="table-of-contents__link"><code>timestamp_unix_nano</code></a></li><li><a href="#timestamp_unix_nano-2" class="table-of-contents__link"><code>timestamp_unix_nano</code></a></li><li><a href="#timestamp_format" class="table-of-contents__link"><code>timestamp_format</code></a></li><li><a href="#timestamp_format_nano" class="table-of-contents__link"><code>timestamp_format_nano</code></a></li><li><a href="#print_log" class="table-of-contents__link"><code>print_log</code></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/guides/getting_started">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/videos">Videos</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/community">Join the chat</a></li><li class="footer__item"><a href="https://github.com/Jeffail/benthos" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/community">Get in touch</a></li><li class="footer__item"><a class="footer__link-item" href="/blobfish">Mascot</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Yellow Messenger</div></div></div></footer></div>
<script src="/styles.e4d5cb5b.js"></script>
<script src="/runtime~main.e88295cd.js"></script>
<script src="/main.c8e4b053.js"></script>
<script src="/1.5924ca73.js"></script>
<script src="/2.b09603a0.js"></script>
<script src="/333.fa5c3434.js"></script>
<script src="/332.1fbf5b90.js"></script>
<script src="/935f2afb.ad0a51ea.js"></script>
<script src="/17896441.ea7c0357.js"></script>
<script src="/681adb9a.60768370.js"></script>
</body>
</html>