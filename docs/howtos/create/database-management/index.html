<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Yellow Messenger Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Yellow Messenger Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-135959729-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Database Management | Yellow Messenger</title><meta data-react-helmet="true" property="og:image" content="https://docs.yellowmessenger.com/img/og_img.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.yellowmessenger.com/img/og_img.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Yellow Messenger"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="Database Management | Yellow Messenger"><meta data-react-helmet="true" name="description" content="How to create a new database and make changes to it?"><meta data-react-helmet="true" property="og:description" content="How to create a new database and make changes to it?"><meta data-react-helmet="true" property="og:url" content="https://docs.yellowmessenger.com/docs/howtos/create/database-management"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://docs.yellowmessenger.com/docs/howtos/create/database-management"><link rel="stylesheet" href="/styles.062154ba.css">
<link rel="preload" href="/styles.9f6cceb1.js" as="script">
<link rel="preload" href="/runtime~main.e3fac3fe.js" as="script">
<link rel="preload" href="/main.b63df87d.js" as="script">
<link rel="preload" href="/1.d3846df6.js" as="script">
<link rel="preload" href="/2.f5be8dac.js" as="script">
<link rel="preload" href="/156.1f9059b9.js" as="script">
<link rel="preload" href="/155.42972607.js" as="script">
<link rel="preload" href="/935f2afb.8b7a70d7.js" as="script">
<link rel="preload" href="/17896441.ad10b765.js" as="script">
<link rel="preload" href="/b64dbb19.2fba5869.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link" href="/cookbooks">Cookbooks</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/howtos/basics/create-a-bot">How-Tos</a><a class="navbar__item navbar__link" href="/docs/documentation/overview">Documentation</a><a class="navbar__item navbar__link" href="/docs/developer/overview">Developer Guide</a></div><div class="navbar__items navbar__items--right"><a href="https://community.yellowmessenger.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a><a href="https://cloud.yellowmessenger.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Get started for free</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cookbooks">Cookbooks</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/howtos/basics/create-a-bot">How-Tos</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/documentation/overview">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/developer/overview">Developer Guide</a></li><li class="menu__list-item"><a href="https://community.yellowmessenger.com" target="_blank" rel="noopener noreferrer" class="menu__link">Community</a></li><li class="menu__list-item"><a href="https://cloud.yellowmessenger.com" target="_blank" rel="noopener noreferrer" class="menu__link">Get started for free</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/howtos/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Basic</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/basics/create-a-bot">Create a bot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/basics/signup-post-bot-invite">Accept Bot Invite</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/basics/publish-bot">Development Environments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/basics/access-management">Access Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/basics/add-faqs">FAQ Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/basics/compare-code">Compare Code</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Create</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/create/cloud-function">Functions</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/howtos/create/database-management">Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/create/api-management">API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/create/localisation">Localisation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/create/setup-did-you-mean">didYouMean</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Context Management</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/context/add-contextual-response">Adding Contextual Responses</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Web-Widget</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/design/setup-web-widget">Setup Web Widget</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Database Management</h1></header><div class="markdown"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="how-to-create-a-new-database-and-make-changes-to-it"></a>How to create a new database and make changes to it?<a class="hash-link" href="#how-to-create-a-new-database-and-make-changes-to-it" title="Direct link to heading">#</a></h3><p><strong>Keywords</strong> :  create , edit, upload, modify, delete, index, note on indexing issue and red symbol</p><p><code>Step 1 </code> : Adding a new table : You can add a new table by simply clicking on the ‘create table’ button. You can add fields here along with custom mapping of the fields if required. </p><p><img src="https://cdn.yellowmessenger.com/bzSJ6BtPnFQQ1615523779900.gif" alt="how to add a new table"></p><p><code>Step 2 </code> : Download the table and add/edit/remove any data from this table. Truncate the same table and reupload the new table. As shown in the following steps.
Edit the table as you want and save it in CSV format. Please make sure that the headers of the table are not changed. </p><p><img src="https://cdn.yellowmessenger.com/mQW2jB05yQNU1615523803757.gif" alt="how to download a table"></p><p><code>Step 3</code> : Truncate the table in the database and upload the new updated table. Please make sure you don’t Drop the table. Dropping the table will delete the table entirely. </p><p><img src="https://cdn.yellowmessenger.com/skJYr0V5Aefd1615524449438.gif" alt="how to truncate a table"></p><p>Once changes are made, can upload the table in CSV format back on the same page using &#x27;Upload&#x27; button. </p><p><strong>Note</strong> : When willing to add single record without downloading and uploading, basically without making a fuss.<br>
Click on ‘Add Record’ and you can add one record at a time.
<img src="https://cdn.yellowmessenger.com/bvqBEKNp5Wpz1615524478859.gif" alt="how to make changes"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="how-to-do-elastic-search-for-database"></a>How to do elastic search for database<a class="hash-link" href="#how-to-do-elastic-search-for-database" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="datastore"></a>DataStore<a class="hash-link" href="#datastore" title="Direct link to heading">#</a></h4><p>The datastore is the local database that is available with each bot instance. It is stored inside MongoDB and is indexed with ElasticSearch.</p><p>Each bot’s table gets it’s own index, by default. If needed, you can specify your own elasticsearch mapping to map the database as per your need.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="architecture"></a>Architecture<a class="hash-link" href="#architecture" title="Direct link to heading">#</a></h4><p>Each table in the bot gets its own space in MongoDB and gets indexed into elasticsearch.</p><p>You can use the UI to create the table, but in order to query through your code, you will need to know how to write elasticsearch queries</p><p>A good place to start would be: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/getting-started.html" target="_blank" rel="noopener noreferrer">Elastic Search Guide</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="datastore-ui"></a>Datastore UI<a class="hash-link" href="#datastore-ui" title="Direct link to heading">#</a></h4><p>The datastore in the UI can be accessed through Developer -&gt; Database, herewith referred to as database section in this document</p><p>Datastore API
The datastore is available inside the app library and can be accessed with app.dataStore</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="datastore-methods"></a>Datastore methods<a class="hash-link" href="#datastore-methods" title="Direct link to heading">#</a></h4><ul><li>search</li><li>insert</li><li>update</li><li>delete</li><li>find</li><li>aggregate</li><li>updateMany</li><li>get</li><li>getForm</li><li>search
The datastore search can be used to search for the record in the table</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">app.datastore.search({</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    table: tableName,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    body: esQuery</span></div><div class="token-line" style="color:#393A34"><span class="token plain">})</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><em>tableName</em>: The table name that is present in the database section</p><p><em>esQuery</em>: The elastic search query that is to be used to search for the records</p><p>This function is promisified and hence can be chained for success and reject cases. The chain would go into the reject block in-case of any errors. It is vital to handle this part.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="insert"></a>insert<a class="hash-link" href="#insert" title="Direct link to heading">#</a></h4><p>The datastore insert function can be used to add records to your table</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">app.datastore.insert({</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        table: tableName,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        record: recordObject</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    })</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><em>tableName</em>: The table name that is present in the database section</p><p><em>recordObject</em>: The Object containing the key-value pairs of the record. The keys are the column names and the values are the values for the columns. The keys have to match the exact column name present in the table</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/howtos/create/cloud-function"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Cloud Function</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/howtos/create/api-management"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Management »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-create-a-new-database-and-make-changes-to-it" class="table-of-contents__link">How to create a new database and make changes to it?</a></li><li><a href="#how-to-do-elastic-search-for-database" class="table-of-contents__link">How to do elastic search for database</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Yellow Messenger</div></div></div></footer></div>
<script src="/styles.9f6cceb1.js"></script>
<script src="/runtime~main.e3fac3fe.js"></script>
<script src="/main.b63df87d.js"></script>
<script src="/1.d3846df6.js"></script>
<script src="/2.f5be8dac.js"></script>
<script src="/156.1f9059b9.js"></script>
<script src="/155.42972607.js"></script>
<script src="/935f2afb.8b7a70d7.js"></script>
<script src="/17896441.ad10b765.js"></script>
<script src="/b64dbb19.2fba5869.js"></script>
</body>
</html>