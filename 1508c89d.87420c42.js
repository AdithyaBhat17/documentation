(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{102:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return u}));var r=n(3),a=n(7),o=(n(0),n(411)),i={title:"Amazon Web Services",description:"Find out about AWS components in Benthos"},l={unversionedId:"guides/aws",id:"guides/aws",isDocsHomePage:!1,title:"Amazon Web Services",description:"Find out about AWS components in Benthos",source:"@site/docs/guides/aws.md",slug:"/guides/aws",permalink:"/docs/guides/aws",editUrl:"https://github.com/Jeffail/benthos/edit/master/website/docs/guides/aws.md",version:"current",sidebar:"docs",previous:{title:"Synchronous Responses",permalink:"/docs/guides/sync_responses"},next:{title:"Serverless",permalink:"/docs/guides/serverless/about"}},s=[{value:"None of these fields are compulsory",id:"none-of-these-fields-are-compulsory",children:[]},{value:"Explicit Credentials",id:"explicit-credentials",children:[{value:"Selecting a Profile",id:"selecting-a-profile",children:[]},{value:"Manual",id:"manual",children:[]}]},{value:"Assuming a Role",id:"assuming-a-role",children:[]}],c={toc:s};function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"There are many components within Benthos which utilise AWS services. You will find that each of these components contains a configuration section under the field ",Object(o.b)("inlineCode",{parentName:"p"},"credentials"),", of the format:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yml"}),'credentials:\n  profile: ""\n  id: ""\n  secret: ""\n  token: ""\n  role: ""\n  role_external_id: ""\n')),Object(o.b)("p",null,"This section contains many fields and it isn't immediately clear which of them are compulsory and which aren't. This document aims to make it clear what each field is responsible for and how it might be used."),Object(o.b)("h3",{id:"none-of-these-fields-are-compulsory"},"None of these fields are compulsory"),Object(o.b)("p",null,"The first thing to make clear is that ",Object(o.b)("em",{parentName:"p"},"all")," of these fields are optional. When all fields are left blank Benthos will attempt to load credentials from a shared credentials file (",Object(o.b)("inlineCode",{parentName:"p"},"~/.aws/credentials"),"). The profile loaded will be ",Object(o.b)("inlineCode",{parentName:"p"},"default")," unless the ",Object(o.b)("inlineCode",{parentName:"p"},"AWS_PROFILE")," environment variable is set."),Object(o.b)("h2",{id:"explicit-credentials"},"Explicit Credentials"),Object(o.b)("p",null,"By explicitly setting the credentials you are using at the component level it's possible to connect to components using different accounts within the same Benthos process."),Object(o.b)("h3",{id:"selecting-a-profile"},"Selecting a Profile"),Object(o.b)("p",null,"If you are using your shared credentials file but wish to explicitly select a profile set the ",Object(o.b)("inlineCode",{parentName:"p"},"profile")," field:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yml"}),"credentials:\n  profile: foo\n")),Object(o.b)("h3",{id:"manual"},"Manual"),Object(o.b)("p",null,"If you are using long term credentials for your account you only need to set the fields ",Object(o.b)("inlineCode",{parentName:"p"},"id")," and ",Object(o.b)("inlineCode",{parentName:"p"},"secret"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yml"}),"credentials:\n  id: foo     # aws_access_key_id\n  secret: bar # aws_secret_access_key\n")),Object(o.b)("p",null,"If you are using short term credentials then you will also need to set the field ",Object(o.b)("inlineCode",{parentName:"p"},"token"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yml"}),"credentials:\n  id: foo     # aws_access_key_id\n  secret: bar # aws_secret_access_key\n  token: baz  # aws_session_token\n")),Object(o.b)("h2",{id:"assuming-a-role"},"Assuming a Role"),Object(o.b)("p",null,"It's also possible to configure Benthos to ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html"}),"assume a role")," using your credentials by setting the field ",Object(o.b)("inlineCode",{parentName:"p"},"role")," to your target role ARN."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yml"}),"credentials:\n  role: fooarn # Role ARN\n")),Object(o.b)("p",null,"This does NOT require explicit credentials, but it's possible to use both."),Object(o.b)("p",null,"If you need to assume a role owned by another organisation they might require you to ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user_externalid.html"}),"provide an external ID"),", in which case place it in the field ",Object(o.b)("inlineCode",{parentName:"p"},"role_external_id"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yml"}),"credentials:\n  role: fooarn # Role ARN\n  role_external_id: bar_id\n")))}u.isMDXComponent=!0},411:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),u=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=u(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(n),b=r,m=d["".concat(i,".").concat(b)]||d[b]||p[b]||o;return n?a.a.createElement(m,l(l({ref:t},c),{},{components:n})):a.a.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=b;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);