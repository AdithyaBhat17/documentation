(window.webpackJsonp=window.webpackJsonp||[]).push([[361],{443:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return b})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return s}));var a=n(3),r=n(7),l=(n(0),n(471)),o=["components"],i={title:"Razorpay",sidebar_label:"Razorpay"},b={unversionedId:"platform_concepts/appConfiguration/razorpay",id:"platform_concepts/appConfiguration/razorpay",isDocsHomePage:!1,title:"Razorpay",description:"You can integrate the Yellow.ai platform with your Razorpay account to receive payments from your end users. Along with receiving payments, you can also perform the following actions:",source:"@site/docs/platform_concepts/appConfiguration/razorpay.md",slug:"/platform_concepts/appConfiguration/razorpay",permalink:"/docs/platform_concepts/appConfiguration/razorpay",version:"current",sidebar_label:"Razorpay",sidebar:"platform_concepts",previous:{title:"Power BI",permalink:"/docs/platform_concepts/appConfiguration/power-bi"},next:{title:"SAP Cloud For Customers (SAP IO)",permalink:"/docs/platform_concepts/appConfiguration/sap-io"}},c=[{value:"1. Connect Razorpay with Yellow.ai",id:"1-connect-razorpay-with-yellowai",children:[{value:"1.1 Generate API keys on Razorpay dashboard",id:"11-generate-api-keys-on-razorpay-dashboard",children:[]},{value:"1.2 Enable the Integration in Yellow.ai&#39;s Integrations Module.",id:"12-enable-the-integration-in-yellowais-integrations-module",children:[]},{value:"1.3 Configure webhook URL in Razorpay Dashboard",id:"13-configure-webhook-url-in-razorpay-dashboard",children:[]},{value:"1.4 Set up webhooks on RazorPay dashboard",id:"14-set-up-webhooks-on-razorpay-dashboard",children:[]},{value:"1.4 Receive events in Yellow.ai",id:"14-receive-events-in-yellowai",children:[]}]},{value:"2. Use-cases",id:"2-use-cases",children:[{value:"2.1 Generate Payment Link",id:"21-generate-payment-link",children:[]},{value:"2.2 Generate Payment Link for Partial Payments",id:"22-generate-payment-link-for-partial-payments",children:[]},{value:"2.3 Intiate refund",id:"23-intiate-refund",children:[]}]}],p={toc:c};function s(e){var t=e.components,n=Object(r.a)(e,o);return Object(l.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"You can integrate the Yellow.ai platform with your ",Object(l.b)("a",{parentName:"p",href:"https://razorpay.com/"},"Razorpay "),"account to receive payments from your end users. Along with receiving payments, you can also perform the following actions:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Generate a payment link and receive the status (success/failure) of the payment."),Object(l.b)("li",{parentName:"ul"},"Generate a payment link to receive partial payments and receive the status (success/failure) of the payments."),Object(l.b)("li",{parentName:"ul"},"Initiate refund process."),Object(l.b)("li",{parentName:"ul"},"Check refund status. ")),Object(l.b)("h2",{id:"1-connect-razorpay-with-yellowai"},"1. Connect Razorpay with Yellow.ai"),Object(l.b)("p",null,"Connect your Yellow.ai platform with your Razorpay account by following the below-mentioned steps."),Object(l.b)("h3",{id:"11-generate-api-keys-on-razorpay-dashboard"},"1.1 Generate API keys on Razorpay dashboard"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"Log into your ",Object(l.b)("strong",{parentName:"li"},"Razorpay")," account and select the mode (Test/Live) for which you want to generate the API key.")),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/74zbT2o.png",alt:null})),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Test Mode:")," The test mode is a simulation mode in which you can test your integration flow. Your customers cannot make payments in this mode. Check out this ",Object(l.b)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=Xwiv6zSVVCM"},"video")," to know more."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Live Mode:")," When your integration is complete, switch to ",Object(l.b)("strong",{parentName:"li"},"Live")," mode and generate live mode API keys. Replace test mode keys with live mode keys in the integration to accept payments from customers.Check out this ",Object(l.b)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=30REpNtYSak"},"video")," to know more.")),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"To generate API keys for a  mode"),","),Object(l.b)("p",null," Navigate to ",Object(l.b)("strong",{parentName:"p"},"Settings")," > ",Object(l.b)("strong",{parentName:"p"},"API Keys")," > ",Object(l.b)("strong",{parentName:"p"},"Generate Key")," to generate key for the selected mode. "),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/vFHopPF.png",alt:null})),Object(l.b)("p",null,"The ",Object(l.b)("strong",{parentName:"p"},"Key Id")," and ",Object(l.b)("strong",{parentName:"p"},"Key Secret")," will appear on the following page. Downalod them to use in your Yellow.ai platform."),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/7RPBlMe.png",alt:null})),Object(l.b)("h3",{id:"12-enable-the-integration-in-yellowais-integrations-module"},"1.2 Enable the Integration in Yellow.ai's Integrations Module."),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"Login to ",Object(l.b)("a",{parentName:"li",href:"https://cloud.yellow.ai/auth/login"},"cloud.yellow.ai"),", go to the ",Object(l.b)("strong",{parentName:"li"},"Overview Switcher")," and click ",Object(l.b)("strong",{parentName:"li"},"Integrations"),".")),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/x4dJgOZ.png",alt:null})),Object(l.b)("ol",{start:3},Object(l.b)("li",{parentName:"ol"},"Look for ",Object(l.b)("strong",{parentName:"li"},"Razorpay")," in the search box or click the ",Object(l.b)("strong",{parentName:"li"},"Payment")," category on the left navigation bar and then click ",Object(l.b)("strong",{parentName:"li"},"Razorpay"),".")),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/TMzGetO.png",alt:null})),Object(l.b)("ol",{start:5},Object(l.b)("li",{parentName:"ol"},"Fill in the fields and click ",Object(l.b)("strong",{parentName:"li"},"Connect"),".")),Object(l.b)("h3",{id:"13-configure-webhook-url-in-razorpay-dashboard"},"1.3 Configure webhook URL in Razorpay Dashboard"),Object(l.b)("p",null,"To receive events, you need to configure the webhook URL in the ",Object(l.b)("strong",{parentName:"p"},"Razorpay Dashboard"),"."),Object(l.b)("p",null,"Copy the webhook url and the api key mentioned in the ",Object(l.b)("strong",{parentName:"p"},"Instructions")," section of the Razorpay Integration Card. Append the region of your bot to the domain of the webhook url. r1/r2/r3/r4/r5 are the regions of your bot, you can refer the following list for the same."),Object(l.b)("p",null,"r1 = MEA\nr2 = Jakarta\nr4= USA\nr5 = Europe\nr3 = Singapore"),Object(l.b)("p",null,"For example, if the domain is ",Object(l.b)("a",{parentName:"p",href:"https://cloud.yellow.ai"},"https://cloud.yellow.ai"),", you need to change it to ",Object(l.b)("a",{parentName:"p",href:"https://r1.cloud.yellow.ai"},"https://r1.cloud.yellow.ai")," if the region of the bot is MEA. If the bot belongs to India, you can use origin domain itself."),Object(l.b)("h3",{id:"14-set-up-webhooks-on-razorpay-dashboard"},"1.4 Set up webhooks on RazorPay dashboard"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"Log into the ",Object(l.b)("a",{parentName:"li",href:"https://dashboard.razorpay.com/#/access/signin"},"Razorpay Dashboard")," and navigate to ",Object(l.b)("strong",{parentName:"li"},"Settings")," \u2192 ",Object(l.b)("strong",{parentName:"li"},"Webhooks"),"."),Object(l.b)("li",{parentName:"ol"},"Click ",Object(l.b)("strong",{parentName:"li"},"+ Add New Webhook")," on the right corner.")),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/aE5zgwH.png",alt:null})),Object(l.b)("ol",{start:3},Object(l.b)("li",{parentName:"ol"},"In the ",Object(l.b)("strong",{parentName:"li"},"Webhook Setup")," pop-up, enter the URL in which you'd like to receive the webhook payload when an event is triggered. We recommend using a ",Object(l.b)("strong",{parentName:"li"},"HTTPS URL"),".")),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/uDShz45.png",alt:null})),Object(l.b)("p",null,"::: Tip"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"You can set upto 10 URLs to receive Webhook notifications. Webhooks can only be delivered to public URLs. If you attempt to save a localhost endpoint as part of a webhook setup, you will encounter an error.\n:::")),Object(l.b)("ol",{start:4},Object(l.b)("li",{parentName:"ol"},"Enter a ",Object(l.b)("strong",{parentName:"li"},"Secret")," for the webhook endpoint. This secret will be used to validate whether the webhook is from ",Object(l.b)("strong",{parentName:"li"},"RazorPay"),". Do not expose this secret publicly. Click ",Object(l.b)("a",{parentName:"li",href:"https://razorpay.com/docs/webhooks/validate-test/"},"here")," to know more validating webhooks. "),Object(l.b)("li",{parentName:"ol"},"In the ",Object(l.b)("strong",{parentName:"li"},"Alert Email")," field, enter the email address to which the notifications should be sent in case there's a webhook failure."),Object(l.b)("li",{parentName:"ol"},"Select the required events from the list of ",Object(l.b)("strong",{parentName:"li"},"Active Events"),"."),Object(l.b)("li",{parentName:"ol"},"Click ",Object(l.b)("strong",{parentName:"li"},"Create Webhook"),". After you set a webhook, it appears on the list of webhooks.")),Object(l.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(l.b)("div",{parentName:"div",className:"admonition-heading"},Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",{parentName:"h5",className:"admonition-icon"},Object(l.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(l.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(l.b)("div",{parentName:"div",className:"admonition-content"},Object(l.b)("p",{parentName:"div"},"To modify the webhook further, you can select the webhook and click ",Object(l.b)("strong",{parentName:"p"},"Edit"),". You can refer this ",Object(l.b)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=qojkh8Vbnek"},"video")," as well."))),Object(l.b)("h3",{id:"14-receive-events-in-yellowai"},"1.4 Receive events in Yellow.ai"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"Login to cloud.yellow.ai and click ",Object(l.b)("strong",{parentName:"li"},"Studio"),". "),Object(l.b)("li",{parentName:"ol"},"Click ",Object(l.b)("strong",{parentName:"li"},"Event")," from the left navigation bar and then choose ",Object(l.b)("strong",{parentName:"li"},"Integrations"),"."),Object(l.b)("li",{parentName:"ol"},"Activate the event ",Object(l.b)("strong",{parentName:"li"},"Razorpay Payment Status")," by clicking the three dots next to it.")),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/fK1Eoii.png",alt:null})),Object(l.b)("ol",{start:4},Object(l.b)("li",{parentName:"ol"},"A journey with its trigger point as this event should be created in ",Object(l.b)("strong",{parentName:"li"},"Studio"),". Based on the received event data, an appropriate message will be displayed to the end user.")),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/Bs6iIH8.png",alt:null})),Object(l.b)("h2",{id:"2-use-cases"},"2. Use-cases"),Object(l.b)("p",null,"The following are the use-cases that are supported in this integration."),Object(l.b)("h3",{id:"21-generate-payment-link"},"2.1 Generate Payment Link"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"In the Studio flow builder, select the ",Object(l.b)("strong",{parentName:"li"},"Integrations")," node and click ",Object(l.b)("strong",{parentName:"li"},"Razorpay")," from the list of integrations that have been enabled for that bot.\n",Object(l.b)("img",{parentName:"li",src:"https://i.imgur.com/iBzozGD.png",alt:null}))),Object(l.b)("ol",{start:2},Object(l.b)("li",{parentName:"ol"},"After clicking ",Object(l.b)("strong",{parentName:"li"},"Razorpay"),",an ",Object(l.b)("strong",{parentName:"li"},"Integration Action Node")," will be added to the flow builder. When you click that node, you will see all use-cases of this integration in a drop-down. Choose ",Object(l.b)("strong",{parentName:"li"},"Generate Payment Link")," from them.")),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/wYYsSxX.png",alt:null})),Object(l.b)("ol",{start:3},Object(l.b)("li",{parentName:"ol"},"Fill in all the mandatory fields. The below-mentioned table consists of the sample value,data type and description for all these fields.")),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",{parentName:"tr",align:null},"Field name"),Object(l.b)("th",{parentName:"tr",align:null},"Sample value"),Object(l.b)("th",{parentName:"tr",align:null},"Data type"),Object(l.b)("th",{parentName:"tr",align:null},"Description"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Text"),Object(l.b)("td",{parentName:"tr",align:null},"Text"),Object(l.b)("td",{parentName:"tr",align:null},"Text"),Object(l.b)("td",{parentName:"tr",align:null})),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Amount"),Object(l.b)("td",{parentName:"tr",align:null},"100"),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"The amount that should be the payment link. This must be in the smallest unit of the currency. For example, if you want to receive a payment of \u20b9299.95, you must enter the value 29995.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Currency"),Object(l.b)("td",{parentName:"tr",align:null},"INR"),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"Default is ",Object(l.b)("strong",{parentName:"td"},"INR"),", we also accept payments in ",Object(l.b)("a",{parentName:"td",href:"https://razorpay.com/docs/payments/payments/international-payments/#supported-currencies"},"international currencies"),".")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Description"),Object(l.b)("td",{parentName:"tr",align:null},"Test"),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"A brief description of the payment link.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"IsUPILinkedEnabled"),Object(l.b)("td",{parentName:"tr",align:null},"true"),Object(l.b)("td",{parentName:"tr",align:null},"Boolean"),Object(l.b)("td",{parentName:"tr",align:null},"Indicates if the payment link is a UPI payment link.",Object(l.b)("br",null)," ",Object(l.b)("strong",{parentName:"td"},"true:")," A UPI payment link has been created.",Object(l.b)("br",null)," ",Object(l.b)("strong",{parentName:"td"},"false:")," It is a standard payment link and not a UPI payment link. ",Object(l.b)("br",null))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"CustomerObject"),Object(l.b)("td",{parentName:"tr",align:null},'{ "contact": "+919999999999", "email": "',Object(l.b)("a",{parentName:"td",href:"mailto:gaurav.kumar@example.com"},"gaurav.kumar@example.com"),'", "name": "Gaurav Kumar" },'),Object(l.b)("td",{parentName:"tr",align:null},"Object"),Object(l.b)("td",{parentName:"tr",align:null},"Customer details")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Notes"),Object(l.b)("td",{parentName:"tr",align:null},'{ "policy_name": "Jeevan Bima" }'),Object(l.b)("td",{parentName:"tr",align:null},"Object"),Object(l.b)("td",{parentName:"tr",align:null},"Set of key-value pairs that can be used to store additional information. You can enter a maximum of 15 key-value pairs, with each value having a maximum limit of 256 characters.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"NotifyOptions"),Object(l.b)("td",{parentName:"tr",align:null},'{ "email": true, "sms": true }'),Object(l.b)("td",{parentName:"tr",align:null},"object"),Object(l.b)("td",{parentName:"tr",align:null},"Defines who handles the payment link notifications.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"CallbackUrl"),Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("a",{parentName:"td",href:"https://example-callback-url.com/"},"https://example-callback-url.com/")),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"if specified it adds a redirect URL to the payment link. Once a customer completes the payment, they will be redirected to the specified URL.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"CallbackMethod"),Object(l.b)("td",{parentName:"tr",align:null},"get"),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"If callback_url parameter is passed, callback_method must be passed with the value get.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"EnableRemindertrue"),Object(l.b)("td",{parentName:"tr",align:null}),Object(l.b)("td",{parentName:"tr",align:null},"Boolean"),Object(l.b)("td",{parentName:"tr",align:null},"This is used to send reminders for the payment link. Possible values:",Object(l.b)("br",null)," ",Object(l.b)("strong",{parentName:"td"},"true:")," To send reminders.",Object(l.b)("br",null)," ",Object(l.b)("strong",{parentName:"td"},"false:")," To disable reminders.",Object(l.b)("br",null))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"CustomOptions"),Object(l.b)("td",{parentName:"tr",align:null},"Reference details"),Object(l.b)("td",{parentName:"tr",align:null},"Object"),Object(l.b)("td",{parentName:"tr",align:null},"Custom options")))),Object(l.b)("ol",{start:4},Object(l.b)("li",{parentName:"ol"},"The ",Object(l.b)("strong",{parentName:"li"},"Generate Payment Link Integration Action")," Node has two outcomes, success or failure. Based on the success/failure of the execution of the ",Object(l.b)("strong",{parentName:"li"},"Integration Action Node"),", the flow will proceed to ",Object(l.b)("strong",{parentName:"li"},"success")," or ",Object(l.b)("strong",{parentName:"li"},"fallback")," branches respectively.")),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Sample response in case of success:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},'{\n  "accept_partial": false,\n  "amount": 1000,\n  "amount_paid": 0,\n  "callback_method": "get",\n  "callback_url": "https://example-callback-url.com/",\n  "cancelled_at": 0,\n  "created_at": 1591097057,\n  "currency": "INR",\n  "customer": {\n    "contact": "+919999999999",\n    "email": "gaurav.kumar@example.com",\n    "name": "Gaurav Kumar"\n  },\n  "description": "Payment for policy no #23456",\n  "expire_by": 1691097057,\n  "expired_at": 0,\n  "first_min_partial_amount": 100,\n  "id": "plink_ExjpAUN3gVHrPJ",\n  "notes": {\n    "policy_name": "Jeevan Bima"\n  },\n  "notify": {\n    "email": true,\n    "sms": true\n  },\n  "payments": null,\n  "reference_id": "TS1989",\n  "reminder_enable": true,\n  "reminders": [],\n  "short_url": "https://rzp.io/i/nxrHnLJ",\n  "status": "created",\n  "updated_at": 1591097057,\n  "user_id": ""\n}\n')),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Sample response in case of fallback:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},'{\n  "error": {\n    "code": "BAD_REQUEST_ERROR",\n    "description": "The api key provided is invalid",\n    "source": "NA",\n    "step": "NA",\n    "reason": "NA",\n    "metadata": {}\n  }\n}\n')),Object(l.b)("p",null,"To use this ",Object(l.b)("strong",{parentName:"p"},"Integration Action Node")," in an app.yellow.ai bot, refer the following example:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},'app.executeIntegrationAction({\n   "integrationName": "razorpay",\n   "action": "Generate Payment Link - Partial Payments\u201d,\n   "dynamicParams": {\n       "amount": "500",\n       "currency": "INR",\n       "description": "test",\n       "isUPILinkEnabled": true,\n       "customerObject": { "name": "GaurarKumar", "contact": "+919999999999", "email": "gaurav.kumar@example.com" },\n       "notes": {\n           "policy_name": "Jeevan Bima"\n       },\n       "notifyOptions": {\n           "sms": true,\n           "email": true\n       },\n       "callbackUrl": "https://example-callback-url.com/",\n       "callbackMethod": "get",\n       "enableReminder": "true",\n       "customOptions": {\n           "test":"testing"\n       }\n   }\n}).then((res) => {\n   console.log("response from action node", res);\n   app.log(res, \'||Response from action node||\')\n}).catch((err) => {\n   console.log("Error in action node", err);\n   app.log(err, \'||Error in action node||\')\n})\n')),Object(l.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(l.b)("div",{parentName:"div",className:"admonition-heading"},Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",{parentName:"h5",className:"admonition-icon"},Object(l.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(l.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(l.b)("div",{parentName:"div",className:"admonition-content"},Object(l.b)("h3",{parentName:"div",id:"payment-status-event-payload"},"Payment status event payload"),Object(l.b)("pre",{parentName:"div"},Object(l.b)("code",{parentName:"pre"},'{\n          "id": "rfnd_FS8TWyPrCsa0OB",\n          "entity": "payment",\n          "amount": 50000,\n          "currency": "INR",\n          "payment_id": "pay_FPoJKWQQ8lK13n",\n          "notes": {\n            "comment": "Customer Notes for Webhooks."\n          },\n          "receipt": null,\n          "acquirer_data": {\n            "arn": null\n          },\n          "created_at": 1597734071,\n          "batch_id": null,\n          "status": "processed",\n          "speed_processed": "normal",\n          "speed_requested": "optimum"\n        }\n\n')))),Object(l.b)("h3",{id:"22-generate-payment-link-for-partial-payments"},"2.2 Generate Payment Link for Partial Payments"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"In the Studio flow builder, select the ",Object(l.b)("strong",{parentName:"li"},"Integrations")," node and click ",Object(l.b)("strong",{parentName:"li"},"Razorpay")," from the list of integrations that have been enabled for that bot.\n",Object(l.b)("img",{parentName:"li",src:"https://i.imgur.com/ysUIxfa.png",alt:null}))),Object(l.b)("ol",{start:2},Object(l.b)("li",{parentName:"ol"},"After clicking ",Object(l.b)("strong",{parentName:"li"},"Razorpay"),",an ",Object(l.b)("strong",{parentName:"li"},"Integration Action Node")," will be added to the flow builder. When you click that node, you will see all use-cases of this integration in a drop-down. Choose ",Object(l.b)("strong",{parentName:"li"},"Generate Payment Link")," from them.")),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/tMcsRTb.png",alt:null})),Object(l.b)("ol",{start:3},Object(l.b)("li",{parentName:"ol"},"Fill in all the mandatory fields. The below-mentioned table consists of the sample value,data type and description for all these fields.")),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",{parentName:"tr",align:null},"Field name"),Object(l.b)("th",{parentName:"tr",align:null},"Sample value"),Object(l.b)("th",{parentName:"tr",align:null},"Data type"),Object(l.b)("th",{parentName:"tr",align:null},"Description"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Text"),Object(l.b)("td",{parentName:"tr",align:null},"Text"),Object(l.b)("td",{parentName:"tr",align:null},"Text"),Object(l.b)("td",{parentName:"tr",align:null})),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Amount"),Object(l.b)("td",{parentName:"tr",align:null},"100"),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"The amount that should be the payment link. This must be in the smallest unit of the currency. For example, if you want to receive a payment of \u20b9299.95, you must enter the value 29995.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Currency"),Object(l.b)("td",{parentName:"tr",align:null},"INR"),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"Default is ",Object(l.b)("strong",{parentName:"td"},"INR"),", we also accept payments in ",Object(l.b)("a",{parentName:"td",href:"https://razorpay.com/docs/payments/payments/international-payments/#supported-currencies"},"international currencies"),".")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Description"),Object(l.b)("td",{parentName:"tr",align:null},"Test"),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"A brief description of the payment link.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"IsUPILinkedEnabled"),Object(l.b)("td",{parentName:"tr",align:null},"true"),Object(l.b)("td",{parentName:"tr",align:null},"Boolean"),Object(l.b)("td",{parentName:"tr",align:null},"Indicates if the payment link is a UPI payment link.",Object(l.b)("br",null)," ",Object(l.b)("strong",{parentName:"td"},"true:")," A UPI payment link has been created.",Object(l.b)("br",null)," ",Object(l.b)("strong",{parentName:"td"},"false:")," It is a standard payment link and not a UPI payment link. ",Object(l.b)("br",null))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"CustomerObject"),Object(l.b)("td",{parentName:"tr",align:null},'{ "contact": "+919999999999", "email": "',Object(l.b)("a",{parentName:"td",href:"mailto:gaurav.kumar@example.com"},"gaurav.kumar@example.com"),'", "name": "Gaurav Kumar" },'),Object(l.b)("td",{parentName:"tr",align:null},"Object"),Object(l.b)("td",{parentName:"tr",align:null},"Customer details")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Notes"),Object(l.b)("td",{parentName:"tr",align:null},'{ "policy_name": "Jeevan Bima" }'),Object(l.b)("td",{parentName:"tr",align:null},"Object"),Object(l.b)("td",{parentName:"tr",align:null},"Set of key-value pairs that can be used to store additional information. You can enter a maximum of 15 key-value pairs, with each value having a maximum limit of 256 characters.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"NotifyOptions"),Object(l.b)("td",{parentName:"tr",align:null},'{ "email": true, "sms": true }'),Object(l.b)("td",{parentName:"tr",align:null},"object"),Object(l.b)("td",{parentName:"tr",align:null},"Defines who handles the payment link notifications.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"CallbackUrl"),Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("a",{parentName:"td",href:"https://example-callback-url.com/"},"https://example-callback-url.com/")),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"if specified it adds a redirect URL to the payment link. Once a customer completes the payment, they will be redirected to the specified URL.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"CallbackMethod"),Object(l.b)("td",{parentName:"tr",align:null},"get"),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"If callback_url parameter is passed, callback_method must be passed with the value get.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"EnableRemindertrue"),Object(l.b)("td",{parentName:"tr",align:null}),Object(l.b)("td",{parentName:"tr",align:null},"Boolean"),Object(l.b)("td",{parentName:"tr",align:null},"This is used to send reminders for the payment link. Possible values:",Object(l.b)("br",null)," ",Object(l.b)("strong",{parentName:"td"},"true:")," To send reminders.",Object(l.b)("br",null)," ",Object(l.b)("strong",{parentName:"td"},"false:")," To disable reminders.",Object(l.b)("br",null))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"CustomOptions"),Object(l.b)("td",{parentName:"tr",align:null},"Reference details"),Object(l.b)("td",{parentName:"tr",align:null},"Object"),Object(l.b)("td",{parentName:"tr",align:null},"Custom options")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"isPartialPaymentAccepted"),Object(l.b)("td",{parentName:"tr",align:null},"true"),Object(l.b)("td",{parentName:"tr",align:null},"Boolean"),Object(l.b)("td",{parentName:"tr",align:null},"Indicates whether customers can make partial payments using the payment link. ",Object(l.b)("br",null)," ",Object(l.b)("strong",{parentName:"td"},"Possible values:")," ",Object(l.b)("br",null)," ",Object(l.b)("strong",{parentName:"td"},"true:")," Customer can make partial payments.",Object(l.b)("br",null),Object(l.b)("strong",{parentName:"td"},"false (default):")," Customer cannot make partial payments.",Object(l.b)("br",null))))),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Sample response in case of success:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},'\n{\n  "accept_partial": false,\n  "amount": 1000,\n  "amount_paid": 0,\n  "callback_method": "get",\n  "callback_url": "https://example-callback-url.com/",\n  "cancelled_at": 0,\n  "created_at": 1591097057,\n  "currency": "INR",\n  "customer": {\n    "contact": "+919999999999",\n    "email": "gaurav.kumar@example.com",\n    "name": "Gaurav Kumar"\n  },\n  "description": "Payment for policy no #23456",\n  "expire_by": 1691097057,\n  "expired_at": 0,\n  "first_min_partial_amount": 100,\n  "id": "plink_ExjpAUN3gVHrPJ",\n  "notes": {\n    "policy_name": "Jeevan Bima"\n  },\n  "notify": {\n    "email": true,\n    "sms": true\n  },\n  "payments": null,\n  "reference_id": "TS1989",\n  "reminder_enable": true,\n  "reminders": [],\n  "short_url": "https://rzp.io/i/nxrHnLJ",\n  "status": "created",\n  "updated_at": 1591097057,\n  "user_id": ""\n}\n')),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Sample response in case of fallback:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},'{\n  "error": {\n    "code": "BAD_REQUEST_ERROR",\n    "description": "The api key provided is invalid",\n    "source": "NA",\n    "step": "NA",\n    "reason": "NA",\n    "metadata": {}\n  }\n}\n')),Object(l.b)("p",null,"To use this ",Object(l.b)("strong",{parentName:"p"},"Integration Action Node")," in an app.yellow.ai bot, refer the following example:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},'app.executeIntegrationAction({\n   "integrationName": "razorpay",\n   "action": "Generate Payment Link",\n   "dynamicParams": {\n       "amount": "500",\n       "isPartialPaymentAccepted":true,\n       "currency": "INR",\n       "description": "test",\n       "isUPILinkEnabled": true,\n       "customerObject": { "name": "GaurarKumar", "contact": "+919999999999", "email": "gaurav.kumar@example.com" },\n       "notes": {\n           "policy_name": "Jeevan Bima"\n       },\n       "notifyOptions": {\n           "sms": true,\n           "email": true\n       },\n       "callbackUrl": "https://example-callback-url.com/",\n       "callbackMethod": "get",\n       "enableReminder": "true",\n       "customOptions": {\n           "test":"testing"\n       }\n   }\n}).then((res) => {\n   console.log("response from action node", res);\n   app.log(res, \'||Response from action node||\')\n}).catch((err) => {\n   console.log("Error in action node", err);\n   app.log(err, \'||Error in action node||\')\n})\n\n')),Object(l.b)("h3",{id:"23-intiate-refund"},"2.3 Intiate refund"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"In the Studio flow builder, select the ",Object(l.b)("strong",{parentName:"li"},"Integrations")," node and click ",Object(l.b)("strong",{parentName:"li"},"Razorpay")," from the list of integrations that have been enabled for that bot.")),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/NTGBdtv.png",alt:null})),Object(l.b)("ol",{start:2},Object(l.b)("li",{parentName:"ol"},"After clicking ",Object(l.b)("strong",{parentName:"li"},"Razorpay"),",an ",Object(l.b)("strong",{parentName:"li"},"Integration Action Node")," will be added to the flow builder. When you click that node, you will see all use-cases of this integration in a drop-down. Choose ",Object(l.b)("strong",{parentName:"li"},"Generate Payment Link")," from them.")),Object(l.b)("p",null,Object(l.b)("img",{parentName:"p",src:"https://i.imgur.com/WxXY6fZ.png",alt:null})),Object(l.b)("ol",{start:3},Object(l.b)("li",{parentName:"ol"},"Fill in all the mandatory fields. The below-mentioned table consists of the sample value,data type and description for all these fields.")),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",{parentName:"tr",align:null},"Field Name"),Object(l.b)("th",{parentName:"tr",align:null},"Sample value"),Object(l.b)("th",{parentName:"tr",align:null},"Data type"),Object(l.b)("th",{parentName:"tr",align:null},"Description"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Amount"),Object(l.b)("td",{parentName:"tr",align:null},"100"),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"The amount to be refunded (in the smallest unit of currency).  For example, refund in INR, a value of 100 means 100 paise (equivalent to \u20b91).")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"paymentId"),Object(l.b)("td",{parentName:"tr",align:null},"pay_FgR9UMzgmKDJRi"),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"The unique identifier of the payment for which a refund is initiated")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"refundType"),Object(l.b)("td",{parentName:"tr",align:null},"normal"),Object(l.b)("td",{parentName:"tr",align:null},"String"),Object(l.b)("td",{parentName:"tr",align:null},"Speed at which the refund should be processed. ",Object(l.b)("br",null)," ",Object(l.b)("strong",{parentName:"td"},"Possible values:"),Object(l.b)("br",null),Object(l.b)("strong",{parentName:"td"},"normal:")," Indicates that the refund will be processed at a normal speed i.e. within 5-7 working days.",Object(l.b)("br",null),Object(l.b)("strong",{parentName:"td"},"optimum:")," Indicates that the refund will be processed at an optimal speed based on Razorpay's internal fund transfer logic.",Object(l.b)("br",null)," If the refund has to be processed instantly, ",Object(l.b)("strong",{parentName:"td"},"Razorpay")," will do so irrespective of the payment method.",Object(l.b)("br",null)," If an instant refund is not possible, Razorpay will initiate a refund  at the normal speed. For example, in case of payments made using debit cards, netbanking or unsupported credit cards.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"notes"),Object(l.b)("td",{parentName:"tr",align:null},"{}"),Object(l.b)("td",{parentName:"tr",align:null},"object"),Object(l.b)("td",{parentName:"tr",align:null},"Key-value store for storing your reference data. A maximum of 15 key-value pairs can be included.")))),Object(l.b)("ol",{start:4},Object(l.b)("li",{parentName:"ol"},"The ",Object(l.b)("strong",{parentName:"li"},"Generate Payment Link Integration Action")," Node has two outcomes, success or failure. Based on the success/failure of the execution of the ",Object(l.b)("strong",{parentName:"li"},"Integration Action Node"),", the flow will proceed to ",Object(l.b)("strong",{parentName:"li"},"success")," or ",Object(l.b)("strong",{parentName:"li"},"fallback")," branches respectively.")),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Success Response:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},'\n{\n  "id": "rfnd_FgRAHdNOM4ZVbO",\n  "entity": "refund",\n  "amount": 10000,\n  "currency": "INR",\n  "payment_id": "pay_FgR9UMzgmKDJRi",\n  "notes": {\n    "notes_key_1": "Beam me up Scotty.",\n    "notes_key_2": "Engage"\n  },\n  "receipt": null,\n  "acquirer_data": {\n    "arn": "10000000000000"\n  },\n  "created_at": 1600856650,\n  "batch_id": null,\n  "status": "processed",\n  "speed_processed": "normal",\n  "speed_requested": "normal"\n}\n')),Object(l.b)("p",null,"To use this ",Object(l.b)("strong",{parentName:"p"},"Integration Action Node")," in an app.yellow.ai bot, refer the following example:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},'app.executeIntegrationAction({\n   "integrationName": "razorpay",\n   "action": "Generate Payment Link",\n   "dynamicParams": {\n       "amount": "500",\n       "refundType":"normal",\n       "paymentId":"pay_FgR9UMzgmKDJRi",\n       "notes": {\n           "policy_name": "Jeevan Bima"\n       }\n   }\n}).then((res) => {\n   console.log("response from action node", res);\n   app.log(res, \'||Response from action node||\')\n}).catch((err) => {\n   console.log("Error in action node", err);\n   app.log(err, \'||Error in action node||\')\n})\n \n')))}s.isMDXComponent=!0},471:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),p=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=p(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,o=e.parentName,c=b(e,["components","mdxType","originalType","parentName"]),s=p(n),u=a,d=s["".concat(o,".").concat(u)]||s[u]||m[u]||l;return n?r.a.createElement(d,i(i({ref:t},c),{},{components:n})):r.a.createElement(d,i({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=u;var i={};for(var b in t)hasOwnProperty.call(t,b)&&(i[b]=t[b]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var c=2;c<l;c++)o[c]=n[c];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);