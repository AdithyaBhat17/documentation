/*! For license information please see 2448a21c.aab9810b.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{125:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return i})),n.d(t,"default",(function(){return b}));var r=n(3),a=n(7),o=(n(0),n(411)),l=n(422),c={title:"Buffers",sidebar_label:"About"},s={unversionedId:"components/buffers/about",id:"components/buffers/about",isDocsHomePage:!1,title:"Buffers",description:"Benthos uses a transaction based model for guaranteeing delivery of messages without the need for a buffer. This ensures that messages are never acknowledged from a source until the message has left the target sink.",source:"@site/docs/components/buffers/about.md",slug:"/components/buffers/about",permalink:"/docs/components/buffers/about",editUrl:"https://github.com/Jeffail/benthos/edit/master/website/docs/components/buffers/about.md",version:"current",sidebar_label:"About",sidebar:"docs",previous:{title:"local",permalink:"/docs/components/rate_limits/local"},next:{title:"memory",permalink:"/docs/components/buffers/memory"}},i=[],u={toc:i};function b(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Benthos uses a transaction based model for guaranteeing delivery of messages without the need for a buffer. This ensures that messages are never acknowledged from a source until the message has left the target sink."),Object(o.b)("p",null,"However, sometimes the transaction model is undesired, in which case there are a range of buffer options available which decouple input sources from the rest of the Benthos pipeline."),Object(o.b)("p",null,"Buffers can therefore solve a number of typical streaming problems but come at the cost of weakening the delivery guarantees of your pipeline. Common problems that might warrant use of a buffer are:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Input sources can periodically spike beyond the capacity of your output sinks."),Object(o.b)("li",{parentName:"ul"},"Your input source needs occasional protection against back pressure from your sink, e.g. during restarts. Keep in mind that all buffers have an eventual limit.")),Object(o.b)("p",null,"If you believe that a problem you have would be solved by a buffer the next step is to choose an implementation based on the throughput and delivery guarantees you need. In order to help here are some simplified tables outlining the different options and their qualities:"),Object(o.b)("h4",{id:"performance"},"Performance"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Type"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Throughput"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Consumers"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Capacity"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Memory"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Highest"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Parallel"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"RAM")))),Object(o.b)("h4",{id:"delivery-guarantees"},"Delivery Guarantees"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Event"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Shutdown"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Crash"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Disk Corruption"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Memory"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Flushed","*"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Lost"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Lost")))),Object(o.b)("p",null,"*"," Makes a best attempt at flushing the remaining messages before closing gracefully."),Object(o.b)(l.a,{type:"buffers",mdxType:"ComponentSelect"}))}b.isMDXComponent=!0},411:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=a.a.createContext({}),u=function(e){var t=a.a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},b=function(e){var t=u(e.components);return a.a.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,i=s(e,["components","mdxType","originalType","parentName"]),b=u(n),m=r,f=b["".concat(l,".").concat(m)]||b[m]||p[m]||o;return n?a.a.createElement(f,c(c({ref:t},i),{},{components:n})):a.a.createElement(f,c({ref:t},i))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,l[1]=c;for(var i=2;i<o;i++)l[i]=n[i];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},417:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var l=a.apply(null,r);l&&e.push(l)}else if("object"===o)for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},422:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(22),l=n(417),c=n.n(l),s=n(57),i=n.n(s);t.a=function(e){var t=e.type,n=e.singular,r=Object(o.default)().siteConfig.customFields.components[t];return"string"!=typeof n&&/s$/.test(n=t)&&(n=t.slice(0,-1)),a.a.createElement("div",{className:"dropdown dropdown--hoverable"},a.a.createElement("button",{className:"button button--outline button--primary"},"Jump to ",n),a.a.createElement("ul",{className:c()(i.a.componentList,"dropdown__menu")},r.map((function(e){return a.a.createElement("li",{key:e.name},a.a.createElement("a",{className:"dropdown__link",href:"/docs/components/"+t+"/"+e.name},e.name))}))))}}}]);