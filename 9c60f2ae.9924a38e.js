(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{191:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return u}));var o=n(3),r=n(7),a=(n(0),n(265)),c={title:"Cloud Function",sidebar_label:"Functions"},i={unversionedId:"platform_concepts/studio/cloud-function",id:"platform_concepts/studio/cloud-function",isDocsHomePage:!1,title:"Cloud Function",description:"How to create a new function?",source:"@site/docs/platform_concepts/studio/cloud-function.md",slug:"/platform_concepts/studio/cloud-function",permalink:"/docs/platform_concepts/studio/cloud-function",version:"current",sidebar_label:"Functions",sidebar:"platform_concepts",previous:{title:"Create and access bot variables in UI",permalink:"/docs/platform_concepts/studio/bot-variables"},next:{title:"Creating Tables and Inserting Data",permalink:"/docs/platform_concepts/data/create-tables"}},s=[{value:"How to create a new function?",id:"how-to-create-a-new-function",children:[]},{value:"What are stateless functions?",id:"what-are-stateless-functions",children:[]}],l={toc:s};function u(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h3",{id:"how-to-create-a-new-function"},"How to create a new function?"),Object(a.b)("p",null,"Cloud Functions compose of all the user defined functions that defines and controls the flow of the bot. The whole structure of writing the code is modularised. Main is the default function which is executed for every message. In the builder section, we can link the cloud functions directly in validators or steps or init functions by selecting the corresponding cloud function created in Developer section."),Object(a.b)("p",null,Object(a.b)("img",Object(o.a)({parentName:"p"},{src:"https://cdn.yellowmessenger.com/GqzX0iZ60ZCO1615523745204.png",alt:"how to add a new function"}))),Object(a.b)("h3",{id:"what-are-stateless-functions"},"What are stateless functions?"),Object(a.b)("p",null,"Stateless means that the previous state is not remembered by the bot. The following stateless functions can be used to implement logics without using any app objects. "),Object(a.b)("h4",{id:"example-stateless-functions---"},"Example stateless functions - >"),Object(a.b)("p",null,"The arguments passed in cloud functions: (console, data, prediction, context, ymLib)"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{}),"interface data {\n    variables: {[key: string]: value: any}; // botVariables ma\n channel: string; // channel name - eg. yellowmessenger, facebook, whatsapp\n profile: object; // user profile - name, contact, etc.\n sender: string; // user ID\n bot: string; // bot ID\n}\n")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{}),"interface ymLib {\n args?: {\n   apiResponse?: any; // passed in transformation functions tagged in API node\n },\n logger: object; // used for logging\n}\ninterface context {\n history: object[]; // history of nodes visited by user.\n}\nprediction {\n intents: any; // to get NLU intents predicted from user message\n}\n")),Object(a.b)("h4",{id:"another-example-here"},"Another Example here"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{}),"return new Promise( resolve => {\n // To get any bot variable value e.g. score\n const value = data.variables['score'];\n // For transfromation function tagged in API Node, To fetch api response\n const response = ymLib.args.apiResponse;\n //\n   // For functions used in Function Action node or Transformation Functions:\n   // Any value returned (or promisified value) - this is actually stored in bot Variable\n   return resolve(345); \n });        \n")),Object(a.b)("h4",{id:"another-exmaple-here--"},"Another Exmaple here -"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{}),"return new Promise(resolve => {\n   const variables = data.variables;\n   // Do your logic here\n     const qr = {\n         title: 'Select an option from here',\n         options: [\n             {title: 'Btn1', text: 'btn1'},\n             {title: 'Btn2', text: 'btn2'}\n         ]\n     };\n     // return Quick Reply object to store in bot variable\n     resolve(qr);\n }); \n")),Object(a.b)("h4",{id:"another-example"},"Another example"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{}),'    const cards = [\n                   {\n                       "title" : "Title1",\n                       "description" : "Description",\n                       "actions" : [\n                           {\n                               "title" : "Button #1",\n                               "buttonDefault" : "text",\n                               "text" : "btn1"\n                           },\n                           {\n                               "title" : "Btn2",\n                               "buttonDefault" : "text",\n                               "text" : "Btn2"\n                           }\n                       ],\n                       "image" : "https://cdn.yellowmessenger.com/P1EbYON6d3GK1623249355856.png",\n                       "video" : "",\n                       "text" : "Desc1"\n                   },\n                   {\n                       "title" : "Title2",\n                       "description" : "Description",\n                       "actions" : [\n                           {\n                               "title" : "Btn2.1",\n                               "buttonDefault" : "text",\n                               "text" : "btn2.1"\n                           }\n                       ],\n                       "image" : "",\n                       "video" : "",\n                       "text" : "Desc2"\n                   }\n               ]\n\n')))}u.isMDXComponent=!0},265:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var o=n(0),r=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),u=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=u(n),d=o,f=p["".concat(c,".").concat(d)]||p[d]||b[d]||a;return n?r.a.createElement(f,i(i({ref:t},l),{},{components:n})):r.a.createElement(f,i({ref:t},l))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,c=new Array(a);c[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,c[1]=i;for(var l=2;l<a;l++)c[l]=n[l];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);