(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{250:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return p})),n.d(t,"default",(function(){return u}));var o=n(3),r=n(7),a=(n(0),n(393)),i=["components"],c={title:"API Management",sidebar_label:"Receiving data from an API"},s={unversionedId:"platform_concepts/studio/api/receive-data",id:"platform_concepts/studio/api/receive-data",isDocsHomePage:!1,title:"API Management",description:"How to access data from an API/Response?",source:"@site/docs/platform_concepts/studio/api/receive-data.md",slug:"/platform_concepts/studio/api/receive-data",permalink:"/docs/platform_concepts/studio/api/receive-data",version:"current",sidebar_label:"Receiving data from an API",sidebar:"platform_concepts",previous:{title:"API Management",permalink:"/docs/platform_concepts/studio/api/send-data"},next:{title:"Using Enviroment Variables in the API",permalink:"/docs/platform_concepts/studio/api/enviroment-variables"}},p=[{value:"How to access data from an API/Response?",id:"how-to-access-data-from-an-apiresponse",children:[]},{value:"How to access transformation Function in API actions node",id:"how-to-access-transformation-function-in-api-actions-node",children:[]}],l={toc:p};function u(e){var t=e.components,n=Object(r.a)(e,i);return Object(a.b)("wrapper",Object(o.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h3",{id:"how-to-access-data-from-an-apiresponse"},"How to access data from an API/Response?"),Object(a.b)("p",null,"To retrieve the API response and to display it to the user, please follow the below steps."),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Add a Prompt/Message node after the actions node.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Select the Variable where you stored API Response.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Using the dot notation, access the value of API response."))),Object(a.b)("p",null,Object(a.b)("img",{parentName:"p",src:"https://cdn.yellowmessenger.com/pM8aYXXUTfPf1623906957904.gif",alt:"API Response"})),Object(a.b)("p",null,"Finally, when a user messages the bot, the id would be displayed to the user."),Object(a.b)("h3",{id:"how-to-access-transformation-function-in-api-actions-node"},"How to access transformation Function in API actions node"),Object(a.b)("p",null,"Transformation Function can be used when you wish to modify/manipulate the API response in order to present the API response in a more meaningful format to the user."),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Add the a function in the ",Object(a.b)("inlineCode",{parentName:"li"},"Code")," module and add the code snippet below.")),Object(a.b)("p",null,Object(a.b)("img",{parentName:"p",src:"https://i.imgur.com/b4AJP3Y.png",alt:null})),Object(a.b)("p",null,"In the transformation function, you could access the API response in ymLib.args. You could write your own logic in javascript to fetch only the fields you wish to have in the response of API."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Code Snippet"),": transformationFN"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js"},"let { apiResponse } = ymLib.args; // retrieve API response\nlet weather_condition, actions = [],result=[]; \nlet response = JSON.parse(apiResponse.body); \n\nresponse = response.weather; // fetch weather data from API response\nresponse.forEach((element, index) => {\n      actions = [];\n      weather_condition = `<strong>${element.main}</strong>`;\n});\nconsole.log(weather_condition);\nreturn weather_condition; \n")),Object(a.b)("ol",{start:2},Object(a.b)("li",{parentName:"ol"},"Once the transformation function is in place, return the value (here ",Object(a.b)("inlineCode",{parentName:"li"},"name"),") so that would be saved in a variable (here ",Object(a.b)("inlineCode",{parentName:"li"},"response"),"). You could use the variable in Prompt or Message node to send that to user. ")),Object(a.b)("img",{src:"https://i.imgur.com/ADPdxJ7.png",alt:"drawing",width:"60%"}))}u.isMDXComponent=!0},393:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var o=n(0),r=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),l=function(e){var t=r.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},u=function(e){var t=l(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(n),b=o,m=u["".concat(i,".").concat(b)]||u[b]||d[b]||a;return n?r.a.createElement(m,c(c({ref:t},p),{},{components:n})):r.a.createElement(m,c({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=b;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var p=2;p<a;p++)i[p]=n[p];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);