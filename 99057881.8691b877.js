(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{257:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return p})),n.d(t,"default",(function(){return b}));var o=n(3),a=n(7),r=(n(0),n(403)),s=["components"],i={title:"Receive Data from API and Parse Response",sidebar_label:"Receiving data from an API"},c={unversionedId:"platform_concepts/studio/api/receive-data",id:"platform_concepts/studio/api/receive-data",isDocsHomePage:!1,title:"Receive Data from API and Parse Response",description:"1. Access data from an API/Response",source:"@site/docs/platform_concepts/studio/api/receive-data.md",slug:"/platform_concepts/studio/api/receive-data",permalink:"/docs/platform_concepts/studio/api/receive-data",version:"current",sidebar_label:"Receiving data from an API",sidebar:"platform_concepts",previous:{title:"Sending data to an API",permalink:"/docs/platform_concepts/studio/api/send-data"},next:{title:"Using Enviroment Variables in the API",permalink:"/docs/platform_concepts/studio/api/enviroment-variables"}},p=[{value:"1. Access data from an API/Response",id:"1-access-data-from-an-apiresponse",children:[]},{value:"2. Access transformation Function in API actions node - API Parse Response",id:"2-access-transformation-function-in-api-actions-node---api-parse-response",children:[]}],l={toc:p};function b(e){var t=e.components,n=Object(a.a)(e,s);return Object(r.b)("wrapper",Object(o.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"1-access-data-from-an-apiresponse"},"1. Access data from an API/Response"),Object(r.b)("p",null,"To retrieve the API response and display it to the user, follow the below steps:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Add a Prompt/Message node after the actions node.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Select the Variable where you stored API Response.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Using the dot notation, access the value of API response."))),Object(r.b)("p",null,Object(r.b)("img",{parentName:"p",src:"https://i.imgur.com/03jY5iw.png",alt:null})),Object(r.b)("p",null,"When a user messages the bot, the ID would be displayed to the user."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Learn more about the API node\n",Object(r.b)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/action-nodes#api"},"here"))),Object(r.b)("h2",{id:"2-access-transformation-function-in-api-actions-node---api-parse-response"},"2. Access transformation Function in API actions node - API Parse Response"),Object(r.b)("p",null,"Transformation Function can be used to modify/manipulate the API response in order to present the API response in a more meaningful format to the user.\nAPI section can be used to invoke APIs but to parse and manipulate the API response, transformation function come in handy.\nFollow the given steps to access transform function:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Open ",Object(r.b)("strong",{parentName:"li"},"Studio > Build > Code"),". Click ",Object(r.b)("strong",{parentName:"li"},"+Add new function"),".")),Object(r.b)("p",null,Object(r.b)("img",{parentName:"p",src:"https://i.imgur.com/tAgKjlN.png",alt:null})),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Code Snippet"),": Example- transformationFN"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"let { apiResponse } = ymLib.args; // retrieve API response\nlet weather_condition, actions = [],result=[]; \nlet response = JSON.parse(apiResponse.body); \n\nresponse = response.weather; // fetch weather data from API response\nresponse.forEach((element, index) => {\n      actions = [];\n      weather_condition = `<strong>${element.main}</strong>`;\n});\nconsole.log(weather_condition);\nreturn weather_condition; \n")),Object(r.b)("ol",{start:2},Object(r.b)("li",{parentName:"ol"},"On the right side of the below screenshot, API response is given which is in JSON format. Fetch and parse the API response as JSON using following code snippet.")),Object(r.b)("p",null,Object(r.b)("img",{parentName:"p",src:"https://i.imgur.com/ttqljrF.png",alt:null})),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"let apiResponse = ymLib.args.apiResponse; // fetch API response\nlet body;\n\nif(apiResponse && apiResponse.body)\n{\n    body = JSON.parse(apiResponse.body) // parse API response and store it in body variable\n}\n")),Object(r.b)("ol",{start:3},Object(r.b)("li",{parentName:"ol"},"In the API response, it starts with an array followed by JSON objects. To access response from the array and store it in the ",Object(r.b)("inlineCode",{parentName:"li"},"postOffice")," variable, add following lines of code in the transformation function.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"let postOffice = body[0].PostOffice; // Access and store PostOffice field from the API response\nconsole.log(postOffice);\n    \nlet postofficeName = [];\n")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"In the transformation function, you can access the API response in ymLib.args. You can write your own logic in javascript to fetch only the fields you wish to have in the response of API.")),Object(r.b)("ol",{start:4},Object(r.b)("li",{parentName:"ol"},"After getting access to JSON object, use a for loop to iterate over all objects and parse ",Object(r.b)("inlineCode",{parentName:"li"},"Name")," key from the objects, which will be pushed to the ",Object(r.b)("inlineCode",{parentName:"li"},"postofficeName")," array.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"for(let i=0;i< postOffice.length; i++) \n    {\n        postofficeName.push(postOffice[i].Name) // fetch PostOffice Name and store in postOfficeName array\n    }\n\nreturn resolve(postofficeName);s\n")),Object(r.b)("ol",{start:5},Object(r.b)("li",{parentName:"ol"},"In the API node, select transformation function that was created from the ",Object(r.b)("strong",{parentName:"li"},"Parse API response")," dropdown.")),Object(r.b)("p",null,Object(r.b)("img",{parentName:"p",src:"https://i.imgur.com/058ZmtW.png",alt:null})))}b.isMDXComponent=!0},403:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f}));var o=n(0),a=n.n(o);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=a.a.createContext({}),l=function(e){var t=a.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},b=function(e){var t=l(e.components);return a.a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),b=l(n),m=o,f=b["".concat(s,".").concat(m)]||b[m]||u[m]||r;return n?a.a.createElement(f,i(i({ref:t},p),{},{components:n})):a.a.createElement(f,i({ref:t},p))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,s=new Array(r);s[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var p=2;p<r;p++)s[p]=n[p];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);