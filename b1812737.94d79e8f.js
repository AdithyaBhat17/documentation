(window.webpackJsonp=window.webpackJsonp||[]).push([[218],{291:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return o})),r.d(t,"metadata",(function(){return p})),r.d(t,"toc",(function(){return c})),r.d(t,"default",(function(){return u}));var a=r(3),n=r(7),i=(r(0),r(393)),s=["components"],o={sidebar_label:"Capture Data Through Conversations",title:"Using Builder to Capture User Data Through Conversations"},p={unversionedId:"platform_concepts/engagement/outbound/cdp/enriching_user_profiles/builder_capture_data",id:"platform_concepts/engagement/outbound/cdp/enriching_user_profiles/builder_capture_data",isDocsHomePage:!1,title:"Using Builder to Capture User Data Through Conversations",description:"If you\u2019ve built a bot on yellow.ai, you can use the Conversational Studio to also capture relevant data around your users and enrich their profile.",source:"@site/docs/platform_concepts/engagement/outbound/cdp/enriching_user_profiles/builder_capture_data.md",slug:"/platform_concepts/engagement/outbound/cdp/enriching_user_profiles/builder_capture_data",permalink:"/docs/platform_concepts/engagement/outbound/cdp/enriching_user_profiles/builder_capture_data",version:"current",sidebar_label:"Capture Data Through Conversations",sidebar:"platform_concepts",previous:{title:"Sending User Data and Events using REST APIs",permalink:"/docs/platform_concepts/engagement/outbound/cdp/enriching_user_profiles/send_user_data_event_rest_api"},next:{title:"Capturing User Activity and Goals using Events",permalink:"/docs/platform_concepts/engagement/outbound/cdp/enriching_user_profiles/user_events"}},c=[{value:"How to store data in user properties?",id:"how-to-store-data-in-user-properties",children:[]},{value:"What are Identified Users?",id:"what-are-identified-users",children:[]},{value:"Using builder to create &amp; update user records in users table",id:"using-builder-to-create--update-user-records-in-users-table",children:[]}],l={toc:c};function u(e){var t=e.components,r=Object(n.a)(e,s);return Object(i.b)("wrapper",Object(a.a)({},l,r,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"If you\u2019ve built a bot on yellow.ai, you can use the ",Object(i.b)("a",{parentName:"p",href:"../../../../studio/overview"},"Conversational Studio")," to also capture relevant data around your users and enrich their profile."),Object(i.b)("p",null,"This data can also be used within the Conversational Studio to ",Object(i.b)("a",{parentName:"p",href:"../user_data/conv_in_builder"},"deliver personalised conversations"),"."),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"All data captured for ",Object(i.b)("a",{parentName:"p",href:"./builder_capture_data#what-are-identified-users"},"Identified Users")," only, is automatically updated in the Users Table."))),Object(i.b)("p",null,"In this document, we will cover:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"./builder_capture_data#how-to-store-data-in-user-properties"},"How to store data in user properties?")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"./builder_capture_data#what-are-identified-users"},"What are Identified Users?")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"./builder_capture_data#using-builder-to-create--update-user-records-in-users-table"},"Using builder to create & update user records in users table")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"./builder_capture_data#what-happens-when-a-new-user-conflicts-with-an-existing-user"},"What happens when a new user conflicts with an existing user?"))),Object(i.b)("h3",{id:"how-to-store-data-in-user-properties"},"How to store data in user properties?"),Object(i.b)("p",null,"User properties are available in all nodes of the builder under ",Object(i.b)("strong",{parentName:"p"},'"User properties"'),"."),Object(i.b)("p",null,"Many times, you\u2019ll directly ask the users for information like name, email, phone number. The response to these questions can be stored in the relevant user property, to enrich the user profile. This is where ",Object(i.b)("a",{parentName:"p",href:"../../../../studio/steps/prompts-and-messages/"},"Prompt Nodes")," come in handy."),Object(i.b)("p",null,"To store a user\u2019s response, click on the drop down next to ",Object(i.b)("strong",{parentName:"p"},"Store Response in"),": \u2192 pick any user property under ",Object(i.b)("strong",{parentName:"p"},"\u201cUser properties\u201d")),Object(i.b)("img",{src:"https://i.imgur.com/p6DvR3D.png",alt:"drawing",width:"60%"}),Object(i.b)("p",null,"A lot of times, the data can not be gathered by directly asking users questions. For example, you might want to fetch certain data from the event payload and pass it to a user property."),Object(i.b)("p",null,"This is where a ",Object(i.b)("a",{parentName:"p",href:"../../../../studio/steps/action-nodes-and-logic/#variables"},"Variables Node")," comes in handy. From the drop down, select any User Property you want to pass the data to."),Object(i.b)("img",{src:"https://i.imgur.com/NWnn7uW.png",alt:"drawing",width:"60%"}),Object(i.b)("h3",{id:"what-are-identified-users"},"What are Identified Users?"),Object(i.b)("p",null,"When userId has been set for a user, that user becomes identified. To know what a userId is and it's importance, you can ",Object(i.b)("a",{parentName:"p",href:"./user_id"},"read this document"),"."),Object(i.b)("p",null,"As soon as a user is identified, it starts showing up as a record in the users table. All updates made to this user, in builder, also show up in the users table. "),Object(i.b)("p",null,"Therefore, while making relevant updates to a user, make sure it is already identified."),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},Object(i.b)("strong",{parentName:"p"},"userId"),", is available as a property under ",Object(i.b)("strong",{parentName:"p"},"User Properties"),", in every builder node."))),Object(i.b)("h3",{id:"using-builder-to-create--update-user-records-in-users-table"},"Using builder to create & update user records in users table"),Object(i.b)("p",null,"As mentioned above, to create a user record in the users table through builder, you need to identify that user. To do that, you need to set it\u2019s ",Object(i.b)("strong",{parentName:"p"},"userId"),", which is available as a property under ",Object(i.b)("strong",{parentName:"p"},"User Properties"),", in every builder node."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"What if a user\u2019s response such as email id, needs to be passed to both, the userId property and email property?")),Object(i.b)("p",null,"You can achieve this by storing the response in email property and then by clicking on ",Object(i.b)("strong",{parentName:"p"},"\u2699\ufe0f icon")," \u2192  select ",Object(i.b)("strong",{parentName:"p"},"Use this as Unique ID for User"),". This will store the response in both email and userId properties."),Object(i.b)("img",{src:"https://i.imgur.com/lwP5L5r.png",alt:"drawing",width:"60%"}),Object(i.b)("p",null,Object(i.b)("img",{parentName:"p",src:"https://i.imgur.com/ty7LQKU.png",alt:null})),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"What happens when a new user conflicts with an existing user?")),Object(i.b)("p",null,"A conflict happens when you identify a user with a userId that already exists in the users table."),Object(i.b)("p",null,"Such situations are possible, especially when the same user appears on multiple channels. In such scenarios, the user might have already been identified on the 1st Channel and as a result might be existing already in the Users Table. Now when the same user is identified on the 2nd Channel, there would be a conflict b/w the new user being created, and the old user that already existed in the users table."),Object(i.b)("p",null,"In such scenarios, the following will happen:"),Object(i.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"All the properties of the new user will be updated to be the same as that of the existing user, ie, new user will be made identical to old user and both will be merged."))),Object(i.b)("p",null,Object(i.b)("img",{parentName:"p",src:"https://i.imgur.com/qNEdl6g.png",alt:null})))}u.isMDXComponent=!0},393:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return h}));var a=r(0),n=r.n(a);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=n.a.createContext({}),l=function(e){var t=n.a.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},u=function(e){var t=l(e.components);return n.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},b=n.a.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=l(r),b=a,h=u["".concat(s,".").concat(b)]||u[b]||d[b]||i;return r?n.a.createElement(h,o(o({ref:t},c),{},{components:r})):n.a.createElement(h,o({ref:t},c))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,s=new Array(i);s[0]=b;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:a,s[1]=o;for(var c=2;c<i;c++)s[c]=r[c];return n.a.createElement.apply(null,s)}return n.a.createElement.apply(null,r)}b.displayName="MDXCreateElement"}}]);