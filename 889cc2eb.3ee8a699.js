(window.webpackJsonp=window.webpackJsonp||[]).push([[195],{271:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return l}));var r=n(3),o=n(7),a=(n(0),n(411)),i=(n(415),n(416),{title:"try",type:"output",status:"stable",categories:["Utility"]}),c={unversionedId:"components/outputs/try",id:"components/outputs/try",isDocsHomePage:!1,title:"try",description:"\x3c!--",source:"@site/docs/components/outputs/try.md",slug:"/components/outputs/try",permalink:"/docs/components/outputs/try",editUrl:"https://github.com/Jeffail/benthos/edit/master/website/docs/components/outputs/try.md",version:"current",sidebar:"docs",previous:{title:"sync_response",permalink:"/docs/components/outputs/sync_response"},next:{title:"websocket",permalink:"/docs/components/outputs/websocket"}},s=[{value:"Batching",id:"batching",children:[]}],u={toc:s};function l(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Attempts to send each message to a child output, starting from the first output\non the list. If an output attempt fails then the next output in the list is\nattempted, and so on."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"# Config fields, showing default values\noutput:\n  try: []\n")),Object(a.b)("p",null,"This pattern is useful for triggering events in the case where certain output\ntargets have broken. For example, if you had an output type ",Object(a.b)("inlineCode",{parentName:"p"},"http_client"),"\nbut wished to reroute messages whenever the endpoint becomes unreachable you\ncould use this pattern:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"output:\n  try:\n  - http_client:\n      url: http://foo:4195/post/might/become/unreachable\n      retries: 3\n      retry_period: 1s\n  - http_client:\n      url: http://bar:4196/somewhere/else\n      retries: 3\n      retry_period: 1s\n    processors:\n    - text:\n        operator: prepend\n        value: 'failed to send this message to foo: '\n  - file:\n      path: /usr/local/benthos/everything_failed.jsonl\n")),Object(a.b)("h3",{id:"batching"},"Batching"),Object(a.b)("p",null,"When an output within a try sequence uses batching, like so:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),'output:\n  try:\n  - dynamodb:\n      table: foo\n      string_columns:\n        id: ${!json("id")}\n        content: ${!content()}\n      batching:\n        count: 10\n        period: 1s\n  - file:\n      path: /usr/local/benthos/failed_stuff.jsonl\n')),Object(a.b)("p",null,"Benthos makes a best attempt at inferring which specific messages of the batch\nfailed, and only propagates those individual messages to the next try tier."),Object(a.b)("p",null,"However, depending on the output and the error returned it is sometimes not\npossible to determine the individual messages that failed, in which case the\nwhole batch is passed to the next tier in order to preserve at-least-once\nguarantees."))}l.isMDXComponent=!0},411:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=o.a.createContext({}),l=function(e){var t=o.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=l(e.components);return o.a.createElement(u.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(n),b=r,d=p["".concat(i,".").concat(b)]||p[b]||f[b]||a;return n?o.a.createElement(d,c(c({ref:t},u),{},{components:n})):o.a.createElement(d,c({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=b;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var u=2;u<a;u++)i[u]=n[u];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},412:function(e,t,n){"use strict";function r(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}t.a=function(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o}},413:function(e,t,n){"use strict";var r=n(0),o=n(414);t.a=function(){var e=Object(r.useContext)(o.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},414:function(e,t,n){"use strict";var r=n(0),o=Object(r.createContext)(void 0);t.a=o},415:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(413),i=n(412),c=n(56),s=n.n(c),u=37,l=39;t.a=function(e){var t=e.lazy,n=e.block,c=e.defaultValue,p=e.values,f=e.groupId,b=e.className,d=Object(a.a)(),m=d.tabGroupChoices,h=d.setTabGroupChoices,y=Object(r.useState)(c),g=y[0],v=y[1],O=r.Children.toArray(e.children);if(null!=f){var j=m[f];null!=j&&j!==g&&p.some((function(e){return e.value===j}))&&v(j)}var w=function(e){v(e),null!=f&&h(f,e)},x=[];return o.a.createElement("div",null,o.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(i.a)("tabs",{"tabs--block":n},b)},p.map((function(e){var t=e.value,n=e.label;return o.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":g===t,className:Object(i.a)("tabs__item",s.a.tabItem,{"tabs__item--active":g===t}),key:t,ref:function(e){return x.push(e)},onKeyDown:function(e){!function(e,t,n){switch(n.keyCode){case l:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case u:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(x,e.target,e)},onFocus:function(){return w(t)},onClick:function(){w(t)}},n)}))),t?Object(r.cloneElement)(O.filter((function(e){return e.props.value===g}))[0],{className:"margin-vert--md"}):o.a.createElement("div",{className:"margin-vert--md"},O.map((function(e,t){return Object(r.cloneElement)(e,{key:t,hidden:e.props.value!==g})}))))}},416:function(e,t,n){"use strict";var r=n(3),o=n(0),a=n.n(o);t.a=function(e){var t=e.children,n=e.hidden,o=e.className;return a.a.createElement("div",Object(r.a)({role:"tabpanel"},{hidden:n,className:o}),t)}}}]);