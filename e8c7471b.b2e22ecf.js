(window.webpackJsonp=window.webpackJsonp||[]).push([[346],{428:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return p})),a.d(t,"toc",(function(){return c})),a.d(t,"default",(function(){return b}));var n=a(3),r=a(7),s=(a(0),a(464)),i=["components"],o={sidebar_label:"Capture data through conversations",title:"Capture data through conversations"},p={unversionedId:"platform_concepts/engagement/cdp/user_data_segments/manage_user_data",id:"platform_concepts/engagement/cdp/user_data_segments/manage_user_data",isDocsHomePage:!1,title:"Capture data through conversations",description:"When building a bot on yellow.ai, you can use Studio to capture user details and enrich user data. You can also create personalised conversations using User properties in Studio conversations. Every bot session is mapped to a record in User 360.",source:"@site/docs/platform_concepts/engagement/cdp/user_data_segments/manage_user_data.md",slug:"/platform_concepts/engagement/cdp/user_data_segments/manage_user_data",permalink:"/docs/platform_concepts/engagement/cdp/user_data_segments/manage_user_data",version:"current",sidebar_label:"Capture data through conversations",sidebar:"platform_concepts",previous:{title:"Add users & enrich user data",permalink:"/docs/platform_concepts/engagement/cdp/user_data/add_users"},next:{title:"Segments overview",permalink:"/docs/platform_concepts/engagement/cdp/user_data_segments/segments_overview"}},c=[{value:"1. User types",id:"1-user-types",children:[{value:"1.1 Unidentified users",id:"11-unidentified-users",children:[]},{value:"1.2 Identified users",id:"12-identified-users",children:[]}]},{value:"2. Add <code>userId</code> through conversations",id:"2-add-userid-through-conversations",children:[]},{value:"3. Set user properties through conversations",id:"3-set-user-properties-through-conversations",children:[]},{value:"4. Fetch user properties in conversations",id:"4-fetch-user-properties-in-conversations",children:[]}],l={toc:c};function b(e){var t=e.components,a=Object(r.a)(e,i);return Object(s.b)("wrapper",Object(n.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(s.b)("p",null,"When building a bot on yellow.ai, you can use ",Object(s.b)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/overview/"},"Studio")," to capture user details and enrich user data. You can also create personalised conversations using ",Object(s.b)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/engagement/cdp/user_data_segments/manage_user_data#manage-user-properties"},"User properties")," in Studio conversations. Every bot session is mapped to a record in User 360."),Object(s.b)("h2",{id:"1-user-types"},"1. User types"),Object(s.b)("p",null,"Users are categorised into two types on basis of the availability of their data in our system:"),Object(s.b)("h3",{id:"11-unidentified-users"},"1.1 Unidentified users"),Object(s.b)("p",null,"Users who are not registered or whose ",Object(s.b)("inlineCode",{parentName:"p"},"userId")," is not added in Yellow.ai.\t"),Object(s.b)("p",null,"An unidentified user is an individual whose ",Object(s.b)("inlineCode",{parentName:"p"},"userId")," is not captured in our system. For a new user on a channel, when a user property other than ",Object(s.b)("inlineCode",{parentName:"p"},"userId")," is captured, a record is created in User 360."),Object(s.b)("p",null,"For example, the moment name is captured, a record is created in User 360 and maps the ongoing session to the record."),Object(s.b)("p",null,Object(s.b)("img",{parentName:"p",src:"https://i.imgur.com/k35p40f.png",alt:null})),Object(s.b)("div",{className:"admonition admonition-info alert alert--info"},Object(s.b)("div",{parentName:"div",className:"admonition-heading"},Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",{parentName:"h5",className:"admonition-icon"},Object(s.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(s.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(s.b)("div",{parentName:"div",className:"admonition-content"},Object(s.b)("p",{parentName:"div"},Object(s.b)("strong",{parentName:"p"},"userId")," is also available as a property under ",Object(s.b)("strong",{parentName:"p"},"User Properties")," of  ",Object(s.b)("strong",{parentName:"p"},"Studio")," > ",Object(s.b)("strong",{parentName:"p"},"Build"),"."))),Object(s.b)("h3",{id:"12-identified-users"},"1.2 Identified users"),Object(s.b)("p",null,"These are registered users whose ",Object(s.b)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/engagement/cdp/enriching_user_profiles/user_id/"},"userId")," is added in Yellow.ai. A record is created for each identified user in the users table. Any update made to the identified user through builder will show up in User 360."),Object(s.b)("p",null,"You can update only identified users' data. Any data captured for ",Object(s.b)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/engagement/cdp/enriching_user_profiles/builder_capture_data/#what-are-identified-users"},"Identified users")," is automatically updated in the Users table."),Object(s.b)("p",null,"The session mapping changes when an existing ",Object(s.b)("inlineCode",{parentName:"p"},"userId")," is provided."),Object(s.b)("p",null,"For the session mentioned in the previous section, if the ",Object(s.b)("inlineCode",{parentName:"p"},"userId")," is ",Object(s.b)("inlineCode",{parentName:"p"},"john@yellow.ai")," which does not exist in User 360, the ",Object(s.b)("inlineCode",{parentName:"p"},"userId")," of the session will be updated without changing the mapping."),Object(s.b)("p",null,Object(s.b)("img",{parentName:"p",src:"https://secure-res.craft.do/v2/WvXLj9MBoxwsE1JhYdg5yCRjnyWs6uzQFF5i9xuHdDFzqh7sYqt3Rxr7pB68h7BeZhVVPU5iyTT9SaFto6iN7CoxM68rVUsJbhVTgb947xypNtqo1s3MWEsC8zCsa12quWXVsHx46LoJ3jLpN3CfqDCovop7ENkfwyCyDNpCEmPPvqik9YTHqNrwLrkfHqktxjo6ZD3VhoYdAxbup34V4gUQw5o2mPL8n6jDYhorDfBmqwY5ENzPrwdsSvn6L7Cw2e7MVh8QTgLDEYNmFa5Y24Fg6439hMqU1YtvuGk9Ag8B2cNj72/Image.jpg",alt:null})),Object(s.b)("p",null,"If the ",Object(s.b)("inlineCode",{parentName:"p"},"userId")," (say, ",Object(s.b)("a",{parentName:"p",href:"mailto:adam@yellow.ai"},"adam@yellow.ai"),") already exists, the current session will be mapped to the existing record and it\u2019s properties will be refreshed with the values available in the record."),Object(s.b)("p",null,Object(s.b)("img",{parentName:"p",src:"https://secure-res.craft.do/v2/WvXLj9MBoxwsE1JhYdg5yCRjnyWs6uzQFF5i9xuHdDFzqh7sYqt3Rxr7pB68h7BeZhVVPU5iyTT9SaFto6iN7CoxM68rVUsJbhVTgb947xypNtqo1s3MWEsC8zCsa12quWXVsHx46LoJ3jLpN3CfqDCowLVqsYQnENyjT2hddNejsC5xzh2MmP8AiEK2sEJWGVSYLjEWVAdBsgevad1WU5xQjGBf78caLXZxsRmLX8Y6MDasCCPp4MBV1Bpu6Go8jJA9gsNscVBiMgCWHL222hHxL7p8N2PKsvheEqwV9AWKGyrDDJ/Image.jpg",alt:null})),Object(s.b)("h4",{id:"example"},"Example"),Object(s.b)("p",null," The following example shows how the information is mapped mapped based on the ",Object(s.b)("inlineCode",{parentName:"p"},"userId"),"."),Object(s.b)("p",null," ",Object(s.b)("strong",{parentName:"p"},"Unidentified record")),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",{parentName:"tr",align:null},"userId"),Object(s.b)("th",{parentName:"tr",align:null},"firstName"),Object(s.b)("th",{parentName:"tr",align:null},"whatsAppOptin"),Object(s.b)("th",{parentName:"tr",align:null},"deviceToken"),Object(s.b)("th",{parentName:"tr",align:null},"Tag"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"-"),Object(s.b)("td",{parentName:"tr",align:null},"Jim"),Object(s.b)("td",{parentName:"tr",align:null},"Yes"),Object(s.b)("td",{parentName:"tr",align:null},"(123,456)"),Object(s.b)("td",{parentName:"tr",align:null},"(t1,t3)")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"Identified record")),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",{parentName:"tr",align:null},"userId"),Object(s.b)("th",{parentName:"tr",align:null},"firstName"),Object(s.b)("th",{parentName:"tr",align:null},"whatsAppOptin"),Object(s.b)("th",{parentName:"tr",align:null},"deviceToken"),Object(s.b)("th",{parentName:"tr",align:null},"Tag"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},Object(s.b)("a",{parentName:"td",href:"mailto:jim@example.com"},"jim@example.com")),Object(s.b)("td",{parentName:"tr",align:null},"Jim"),Object(s.b)("td",{parentName:"tr",align:null},"-"),Object(s.b)("td",{parentName:"tr",align:null},"789"),Object(s.b)("td",{parentName:"tr",align:null},"(t1,t2)")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"Result record")),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",{parentName:"tr",align:null},"userId"),Object(s.b)("th",{parentName:"tr",align:null},"firstName"),Object(s.b)("th",{parentName:"tr",align:null},"whatsAppOptin"),Object(s.b)("th",{parentName:"tr",align:null},"deviceToken"),Object(s.b)("th",{parentName:"tr",align:null},"Tag"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},Object(s.b)("a",{parentName:"td",href:"mailto:jim@example.com"},"jim@example.com")),Object(s.b)("td",{parentName:"tr",align:null},"Jim"),Object(s.b)("td",{parentName:"tr",align:null},"Yes"),Object(s.b)("td",{parentName:"tr",align:null},"(123,456,789)"),Object(s.b)("td",{parentName:"tr",align:null},"(t1,t2,t3)")))),Object(s.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(s.b)("div",{parentName:"div",className:"admonition-heading"},Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",{parentName:"h5",className:"admonition-icon"},Object(s.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(s.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(s.b)("div",{parentName:"div",className:"admonition-content"},Object(s.b)("p",{parentName:"div"},"Session mapping is used to point multiple sessions on different channels to the same user record. "))),Object(s.b)("h2",{id:"2-add-userid-through-conversations"},"2. Add ",Object(s.b)("inlineCode",{parentName:"h2"},"userId")," through conversations"),Object(s.b)("p",null,"To update ",Object(s.b)("inlineCode",{parentName:"p"},"userId")," of customers through bot conversations:"),Object(s.b)("ol",null,Object(s.b)("li",{parentName:"ol"},Object(s.b)("p",{parentName:"li"},"When building flows in ",Object(s.b)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/overview/"},"Studio"),", use the ",Object(s.b)("strong",{parentName:"p"},"Prompt")," node or ",Object(s.b)("em",{parentName:"p"},"Variables")," node. ")),Object(s.b)("li",{parentName:"ol"},Object(s.b)("p",{parentName:"li"},"Click ",Object(s.b)("strong",{parentName:"p"},"Make prompt smarter")," and scroll-down to the ",Object(s.b)("em",{parentName:"p"},"Additional section"),".  "),Object(s.b)("p",{parentName:"li"},Object(s.b)("img",{parentName:"p",src:"https://i.imgur.com/t2p6uHD.png",alt:null}))),Object(s.b)("li",{parentName:"ol"},Object(s.b)("p",{parentName:"li"},"Check ",Object(s.b)("strong",{parentName:"p"},"Use this as Unique ID for user"),".\n",Object(s.b)("img",{parentName:"p",src:"https://i.imgur.com/7TPjvkH.png",alt:null})))),Object(s.b)("h2",{id:"3-set-user-properties-through-conversations"},"3. Set user properties through conversations"),Object(s.b)("p",null,"The user record is updated in the database using the session mapping. "),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"When building a bot, use ",Object(s.b)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/prompt-nodes"},"Prompt")," or ",Object(s.b)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/bot-variables/#412-variables--action-node"},"Variable")," nodes to capture user properties (such as name, email, phone number, location, or any system/custom user property) through conversations.")),Object(s.b)("center",null,Object(s.b)("img",{src:"https://i.imgur.com/p6DvR3D.png",width:"60%"})),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("p",{parentName:"li"},"To extract data from a payload, use the ",Object(s.b)("strong",{parentName:"p"},"Input")," node and store information in the relevant user property. For example, fetch user details from the user add event payload and store them in relevant user properties. "),Object(s.b)("p",{parentName:"li"}," ",Object(s.b)("img",{parentName:"p",src:"https://i.imgur.com/0kX3iJT.png",alt:null})))),Object(s.b)("center",null,Object(s.b)("img",{src:"https://i.imgur.com/7ltkBj4.png",width:"40%"})),Object(s.b)("h2",{id:"4-fetch-user-properties-in-conversations"},"4. Fetch user properties in conversations"),Object(s.b)("p",null,"You can also fetch user properties in conversations using the ",Object(s.b)("strong",{parentName:"p"},"Text")," node. For example, Hi {{{variables.user_name}}} - the value is fetched from the user record mapped to the current session. Use these variables to create personalised conversations."),Object(s.b)("p",null,Object(s.b)("img",{parentName:"p",src:"https://i.imgur.com/tFyoRXF.png",alt:null})))}b.isMDXComponent=!0},464:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return m}));var n=a(0),r=a.n(n);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=r.a.createContext({}),l=function(e){var t=r.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},b=function(e){var t=l(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,s=e.originalType,i=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),b=l(a),u=n,m=b["".concat(i,".").concat(u)]||b[u]||d[u]||s;return a?r.a.createElement(m,o(o({ref:t},c),{},{components:a})):r.a.createElement(m,o({ref:t},c))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=a.length,i=new Array(s);i[0]=u;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:n,i[1]=o;for(var c=2;c<s;c++)i[c]=a[c];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"}}]);