(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{160:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return p}));var a=n(3),r=n(7),s=(n(0),n(274)),o={title:"Platform API",sidebar_label:"Platform API"},i={unversionedId:"developer/app/apis/platform-api",id:"developer/app/apis/platform-api",isDocsHomePage:!1,title:"Platform API",description:"Message API",source:"@site/docs/developer/app/apis/platform-api.md",slug:"/developer/app/apis/platform-api",permalink:"/docs/developer/app/apis/platform-api",version:"current",sidebar_label:"Platform API"},c=[{value:"Message API",id:"message-api",children:[{value:"Request",id:"request",children:[]},{value:"Response",id:"response",children:[]}]},{value:"Prediction API",id:"prediction-api",children:[{value:"Request",id:"request-1",children:[]},{value:"Response",id:"response-1",children:[]}]}],l={toc:c};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(s.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("h2",{id:"message-api"},"Message API"),Object(s.b)("h3",{id:"request"},"Request"),Object(s.b)("p",null,"This API takes in user\u2019s query as input and returns the bot\u2019s response as an output. Once you have created a journey in the bot, you can call it like this -"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"https://app.yellowmessenger.com/integrations/yellowmessenger/message\n")),Object(s.b)("p",null,"In order to test it, please import the following cURL request into Postman/terminal and update the bot ID with the ID of the bot that you are looking to test -"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'curl --location --request POST \'https://app.yellowmessenger.com/integrations/yellowmessenger/message\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n    "sender": "X_AUTH_TOKEN",\n    "botId": "botID",\n    "data": "{\\"message\\":\\"raise issues\\"}",\n    "source": "syncApi"\n}\'\n')),Object(s.b)("p",null,"The bot ID can be found in the bot URL. The sender is a unique identity used to identify each user in this bot. It can be random string, email, phone, etc."),Object(s.b)("h3",{id:"response"},"Response"),Object(s.b)("p",null,"The API returns a JSON as a response with sender ID and message. message contains the response of the chatbot to the user\u2019s query after performing all specified actions."),Object(s.b)("p",null,"Note, session management happens automatically through this API. If the time difference between two consecutive messages from the same user is more than 30 mins, automatically a new session is started. If it's less, the message automatically gets added to the same session."),Object(s.b)("h2",{id:"prediction-api"},"Prediction API"),Object(s.b)("h3",{id:"request-1"},"Request"),Object(s.b)("p",null,"Prediction API is used to trigger the NLP service and get intents and entities detected by the bot. Below is a sample request -"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"https://app.yellowmessenger.com/api/ml/prediction?bot=x1557296852218&text=asd&language=en\n")),Object(s.b)("p",null,"In order to test it, please import the following cURL request into Postman/terminal and update the bot ID with the ID of the bot that you are looking to test -"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"curl --location --request GET 'https://app.yellowmessenger.com/api/ml/prediction?bot=x1557296852218&text=asd&language=en' \\\n--header 'x-auth-token: X_AUTH_TOKEN'\n")),Object(s.b)("p",null,"Here, x-auth-token is the unique token of each user to identify permissions for this user on the platform. You can access your auth token by going to Home \u2192 Account Settings \u2192 Access Keys."),Object(s.b)("h3",{id:"response-1"},"Response"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'{\n    "core": false,\n    "intents": {\n        "viti": 0.306,\n        "wow_there": 0.699\n    },\n    "language_detected": "en",\n    "sentiment": "neutral",\n    "small_talk_model": {},\n    "text": "asd",\n    "parser": {\n        "noun_chunks": [],\n        "lemmas": [\n            "asd"\n        ],\n        "sentences": [\n            "asd"\n        ],\n        "tokens": [\n            {\n                "text": "asd",\n                "pos": "X",\n                "lemma": "asd"\n            }\n        ],\n        "entities": [],\n        "other_keywords": [\n            {\n                "text": "asd",\n                "pos": "X",\n                "lemma": "asd"\n            }\n        ],\n        "parsed_tree": [\n            {\n                "head_pos": 101,\n                "dep": "ROOT",\n                "text": "asd",\n                "pos": "X",\n                "head_text": "asd",\n                "children": []\n            }\n        ],\n        "lemma_list": [\n            {\n                "lemma": "asd",\n                "pos": "X",\n                "text": "asd"\n            }\n        ]\n    },\n    "confidence": 0.699,\n    "global_entities": [],\n    "entities": {},\n    "synonym_detected": false,\n    "intent": "wow_there",\n    "global_model": {},\n    "response": {}\n}\n')))}p.isMDXComponent=!0},274:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return b}));var a=n(0),r=n.n(a);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),p=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(n),m=a,b=u["".concat(o,".").concat(m)]||u[m]||d[m]||s;return n?r.a.createElement(b,i(i({ref:t},l),{},{components:n})):r.a.createElement(b,i({ref:t},l))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,o=new Array(s);o[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var l=2;l<s;l++)o[l]=n[l];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);